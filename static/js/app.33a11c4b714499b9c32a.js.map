{"version":3,"sources":["webpack:///static/js/app.33a11c4b714499b9c32a.js","webpack:///./src/services/file.js","webpack:///./src/store/actions.js","webpack:///./src/store/modules/bills.js","webpack:///./src/store/modules/collaborators.js","webpack:///./src/store/modules/file.js","webpack:///App.vue","webpack:///Bills.vue","webpack:///CreateNewFileDialog.vue","webpack:///./src/store/mutation-types.js","webpack:///./src/assets/google-drive.svg","webpack:///./src/components/Bills.vue?c46e","webpack:///./src/components/CreateNewFileDialog.vue","webpack:///./src/components/Bills.vue?12b9","webpack:///./src/App.vue?224a","webpack:///./src/components/CreateNewFileDialog.vue?0b3d","webpack:///./src/gapi/gapi-integration.js","webpack:///./src/store/index.js","webpack:///./src/App.vue?2828","webpack:///./src/api.js","webpack:///./src/gapi/multipart.js","webpack:///./src/main.js"],"names":["webpackJsonp","100","module","__webpack_exports__","__webpack_require__","d","file","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","n","__WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__","__WEBPACK_IMPORTED_MODULE_2__store__","__WEBPACK_IMPORTED_MODULE_3_lodash_get__","__WEBPACK_IMPORTED_MODULE_3_lodash_get___default","__WEBPACK_IMPORTED_MODULE_4_lodash_find__","__WEBPACK_IMPORTED_MODULE_4_lodash_find___default","model","createNewFile","filename","_this","this","a","resolve","reject","console","log","dispatch","then","loadRtDoc","contentEventHandler","filenameEventHandler","collaboratorEventHandler","cursorsMapEventHandler","bind","catch","openFromGDrive","_this2","showPicker","id","loadFromGDrive","error","loadFile","content","result","message","evt","contentText","getText","filenameText","type","target","getCollaborators","length","forEach","collaborator","userId","sessionId","displayName","color","isMe","moveCursor","pos","getMyRegisteredReference","index","getCursors","cursorsMap","garbageCollectCursors","keys","cursors","i","get","getCollaborator","removeAllEventListeners","addEventListener","gapi","drive","realtime","EventType","REFERENCE_SHIFTED","onReferenceShifted","delete","collaborators","getMyCollaborator","myRegisteredReference","myNewRegisteredReference","registerReference","set","share","showSharing","101","updateWindowUrl","fileMetadata","queryVars","__WEBPACK_IMPORTED_MODULE_4_querystringify___default","parse","window","location","search","history","pushState","name","pathname","stringify","updateLocalStorage","localStorage","setItem","Object","defineProperty","value","saveFile","editContent","updateContent","renameFile","updateFilename","setCollaborators","setCursors","__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__","__WEBPACK_IMPORTED_MODULE_3_lodash__","__WEBPACK_IMPORTED_MODULE_3_lodash___default","__WEBPACK_IMPORTED_MODULE_4_querystringify__","_ref","commit","state","reason","metadata","_ref2","debounceSave","debounce","_ref3","setText","_ref4","text","_ref5","_ref6","_ref7","_ref8","_ref9","102","_mutations","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default","__WEBPACK_IMPORTED_MODULE_1__store_mutation_types__","STATUS_LIST","INITIAL","SAVING","SAVED","NOT_SAVED","DIRTY","LOADED","items","status","mutations","fileContent","JSON","103","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_2__mutation_types__","users","reduce","user","cursor","push","104","__WEBPACK_IMPORTED_MODULE_1_lodash__","__WEBPACK_IMPORTED_MODULE_1_lodash___default","mimeType","assign","slice","105","__WEBPACK_IMPORTED_MODULE_0_querystringify__","__WEBPACK_IMPORTED_MODULE_0_querystringify___default","__WEBPACK_IMPORTED_MODULE_2__components_CreateNewFileDialog__","__WEBPACK_IMPORTED_MODULE_2__components_CreateNewFileDialog___default","__WEBPACK_IMPORTED_MODULE_3__components_Bills__","__WEBPACK_IMPORTED_MODULE_3__components_Bills___default","__WEBPACK_IMPORTED_MODULE_4__services__","components","bills-view","create-new-file-dialog","data","showLogin","loading","receitas","despesas","mounted","loadDriveApis","authorize","loadThisFile","methods","handleAuthClick","_this3","errorMessage","openCreateNewFile","$refs","create_new_file","openDialog","tryAgain","reload","106","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_2__api_js__","selected","menuVisible","created","byJovane","fetchData","changeFilter","tabIndex","onSelect","getAlternateLabel","count","plural","total","computed","bills","allItems","negativeItems","filter","item","positiveItems","_self","activeClass","107","__WEBPACK_IMPORTED_MODULE_0__assets_google_drive_svg__","__WEBPACK_IMPORTED_MODULE_0__assets_google_drive_svg___default","__WEBPACK_IMPORTED_MODULE_1__services__","showDialog","gdriveSvg","createNew","er","info","$event","149","exports","150","16","NEW_FILE","FILE_SAVED","FILE_SAVING","FILE_NOT_SAVED","FILE_DIRTY","EDIT_CONTENT","INSERT_CONTENT","DELETE_CONTENT","RENAME_FILE","LOAD_FILE","SET_COLLABORATORS","SET_CURSORS","INSERT_BILL","UPDATE_BILL","DELETE_BILL","LOAD_BILLS","238","239","Component","240","241","render","_vm","_h","$createElement","_c","attrs","md-waterfall","md-mode","staticClass","on","click","_v","md-label","md-active","update:mdActive","md-elevation","md-card","md-selected","scopedSlots","_u","key","fn","ref","md-selectable","md-auto-select","md-sort-by","_s","description","callback","$$v","expression","staticStyle","flex","staticRenderFns","242","nativeOn","md-diameter","md-stroke","_e","243","md-click-outside-to-close","md-close-on-esc","v-model","src","30","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_4__gapi_multipart__","GApiIntegration","APPLICATION_ID","CLIENT_ID","SCOPES","DEFAULT_FIELDS","waitForApi","client","all","load","setTimeout","immediate","arguments","undefined","auth","buildAuthRequest","authResult","immediateMode","request","client_id","scope","join","login_hint","authuser","path","method","encodeURIComponent","multipart","append","finish","params","uploadType","fields","headers","Content-Type","body","fileId","metadataRequest","files","contentRequest","alt","responses","that","doc","getModel","getRoot","TEXT_INSERTED","TEXT_DELETED","COLLABORATOR_JOINED","COLLABORATOR_LEFT","VALUE_CHANGED","contentString","createString","filenameString","createMap","ErrorType","TOKEN_REFRESH_REQUIRED","CLIENT_ERROR","NOT_FOUND","FORBIDDEN","href","view","google","picker","DocsView","ViewId","DOCS","setSelectFolderEnabled","setIncludeFolders","PickerBuilder","setAppId","setOAuthToken","getToken","access_token","addView","setCallback","action","docs","build","setVisible","ShareClient","setItemIds","showSettingsDialog","48","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_2__store_modules_file__","__WEBPACK_IMPORTED_MODULE_3__store_modules_bills__","__WEBPACK_IMPORTED_MODULE_4__store_modules_collaborators__","__WEBPACK_IMPORTED_MODULE_5__store_actions__","use","Store","actions","modules","strict","49","__WEBPACK_IMPORTED_MODULE_0__services_file__","93","94","95","97","getBills","98","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","_class","boundary","Math","random","toString","parts","Error","99","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","__WEBPACK_IMPORTED_MODULE_3_vue_material__","__WEBPACK_IMPORTED_MODULE_3_vue_material___default","__WEBPACK_IMPORTED_MODULE_4_vue_material_dist_vue_material_min_css__","__WEBPACK_IMPORTED_MODULE_5_vue_material_dist_theme_default_css__","config","productionTip","toFixed","replace","date","Date","getDate","getMonth","polyfill","store","el","template","App"],"mappings":"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","file":"static/js/app.33a11c4b714499b9c32a.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 100:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return file; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash_get__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash_find__ = __webpack_require__(224);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash_find___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash_find__);\n\n\n\n\n\n\nvar file = {\n  model: null,\n\n  createNewFile: function createNewFile(filename) {\n    var _this = this;\n\n    return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n      console.log('creating ' + file);\n      __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].dispatch('createNewFile', filename).then(function (file) {\n        __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].loadRtDoc(file, _this.contentEventHandler, _this.filenameEventHandler, _this.collaboratorEventHandler, _this.cursorsMapEventHandler.bind(_this)).then(function () {\n          resolve(file);\n        }).catch(function () {\n          reject('rt file not loaded');\n        });\n      }).catch(function () {\n        return reject('not loaded');\n      });\n    });\n  },\n  openFromGDrive: function openFromGDrive() {\n    var _this2 = this;\n\n    return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n      __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].showPicker().then(function (id) {\n        if (id !== __WEBPACK_IMPORTED_MODULE_3_lodash_get___default()(__WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */], 'state.file.metadata.id')) {\n          _this2.loadFromGDrive(id).then(function () {\n            return resolve();\n          }).then(function (error) {\n            return reject(error);\n          });\n        }\n      }).catch(function () {\n        reject('not picked');\n      });\n    });\n  },\n  loadFromGDrive: function loadFromGDrive(id) {\n    return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n      __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].loadFile(id).then(function (file) {\n        __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].dispatch('loadFile', file);\n        __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].dispatch('updateContent', file.content);\n        resolve(file);\n        return file;\n      }).catch(function (error) {\n        console.error(error);\n        reject(error.result.error.message);\n      });\n    });\n  },\n  contentEventHandler: function contentEventHandler(evt) {\n    console.log('contentEventHandler');\n    __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].dispatch('updateContent', __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].contentText.getText());\n  },\n  filenameEventHandler: function filenameEventHandler(evt) {\n    console.log('filenameEventHandler: ' + __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].filenameText.getText());\n    __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].dispatch('updateFilename', __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].filenameText.getText());\n  },\n  collaboratorEventHandler: function collaboratorEventHandler(evt) {\n    console.log('---------------- collaboratorEventHandler: ' + (evt ? evt.type : 'none'));\n    console.log(evt.target.getCollaborators().length + 'COLLABORATORS');\n    evt.target.getCollaborators().forEach(function (collaborator) {\n      console.log('User ID:' + collaborator.userId);\n      console.log('Session ID:' + collaborator.sessionId);\n      console.log('Name:' + collaborator.displayName);\n      console.log('Color:' + collaborator.color);\n      console.log('IS_ME: ' + collaborator.isMe);\n    });\n\n    __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].dispatch('setCollaborators', evt.target.getCollaborators());\n  },\n  moveCursor: function moveCursor(pos) {\n    this.getMyRegisteredReference(pos).index = pos;\n  },\n  cursorsMapEventHandler: function cursorsMapEventHandler(evt) {\n    __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].dispatch('setCursors', this.getCursors());\n  },\n  getCursors: function getCursors() {\n    var cursorsMap = this.garbageCollectCursors();\n    var keys = cursorsMap.keys();\n    var cursors = {};\n    for (var i = 0; i < keys.length; i++) {\n      cursors[keys[i]] = cursorsMap.get(keys[i]).index;\n    }\n\n    return cursors;\n  },\n\n\n  garbageCollectCursors: function garbageCollectCursors() {\n    var cursorsMap = __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].cursorsMap;\n    var keys = cursorsMap.keys();\n    for (var i = 0; i < keys.length; i++) {\n      if (!this.getCollaborator(keys[i])) {\n        cursorsMap.delete(keys[i]);\n      } else {\n        cursorsMap.get(keys[i]).removeAllEventListeners();\n        cursorsMap.get(keys[i]).addEventListener(gapi.drive.realtime.EventType.REFERENCE_SHIFTED, this.onReferenceShifted.bind(this));\n      }\n    }\n\n    return cursorsMap;\n  },\n\n  getCollaborator: function getCollaborator(sessionId) {\n    var collaborators = __WEBPACK_IMPORTED_MODULE_3_lodash_get___default()(__WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */], 'state.collaborators.users');\n    if (!collaborators) {\n      return null;\n    }\n    return __WEBPACK_IMPORTED_MODULE_4_lodash_find___default()(collaborators, { 'sessionId': sessionId });\n  },\n\n  getMyCollaborator: function getMyCollaborator() {\n    var collaborators = __WEBPACK_IMPORTED_MODULE_3_lodash_get___default()(__WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */], 'state.collaborators.users');\n    if (!collaborators) {\n      return null;\n    }\n    return __WEBPACK_IMPORTED_MODULE_4_lodash_find___default()(collaborators, { 'isMe': true });\n  },\n\n  getMyRegisteredReference: function getMyRegisteredReference(pos) {\n    var cursorsMap = __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].cursorsMap;\n    if (!cursorsMap) {\n      return null;\n    }\n\n    var myRegisteredReference = cursorsMap.get(this.getMyCollaborator().sessionId);\n    if (myRegisteredReference) {\n      return myRegisteredReference;\n    }\n    var myNewRegisteredReference = __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].contentText.registerReference(pos, true);\n    myNewRegisteredReference.addEventListener(gapi.drive.realtime.EventType.REFERENCE_SHIFTED, this.onReferenceShifted.bind(this));\n    __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].cursorsMap.set(this.getMyCollaborator().sessionId, myNewRegisteredReference);\n    return myNewRegisteredReference;\n  },\n\n  onReferenceShifted: function onReferenceShifted() {\n    __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].dispatch('setCursors', this.getCursors());\n  },\n\n  share: function share() {\n    return __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].showSharing(__WEBPACK_IMPORTED_MODULE_3_lodash_get___default()(__WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */], 'state.file.metadata.id'));\n  }\n};\n\n/***/ }),\n\n/***/ 101:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createNewFile\", function() { return createNewFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"saveFile\", function() { return saveFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"editContent\", function() { return editContent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateContent\", function() { return updateContent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"renameFile\", function() { return renameFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateFilename\", function() { return updateFilename; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadFile\", function() { return loadFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setCollaborators\", function() { return setCollaborators; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setCursors\", function() { return setCursors; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(88);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_querystringify__ = __webpack_require__(90);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_querystringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_querystringify__);\n\n\n\n\n\n\nvar createNewFile = function createNewFile(_ref, filename) {\n  var commit = _ref.commit,\n      state = _ref.state;\n\n  console.log('Creating new file');\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"g\" /* NEW_FILE */], filename);\n\n  return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].saveFile(state.file, filename).then(function (result) {\n      return commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"h\" /* FILE_SAVED */], result.result);\n    }, function (reason) {\n      return commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"i\" /* FILE_NOT_SAVED */]);\n    }).then(function () {\n      updateWindowUrl(state.file.metadata);\n      updateLocalStorage(state.file.metadata);\n    }).then(function () {\n      resolve(state.file);\n    });\n  });\n};\n\nvar saveFile = function saveFile(_ref2) {\n  var commit = _ref2.commit,\n      state = _ref2.state;\n\n  console.log('Saving new file');\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"j\" /* FILE_SAVING */]);\n\n  return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].saveFile(state.file).then(function (result) {\n      commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"h\" /* FILE_SAVED */], result.result);\n      resolve();\n    }, function (reason) {\n      commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"i\" /* FILE_NOT_SAVED */]);\n      reject(reason);\n    });\n  });\n};\n\nvar debounceSave = __WEBPACK_IMPORTED_MODULE_3_lodash___default.a.debounce(saveFile, 2000);\n\nvar editContent = function editContent(_ref3, value) {\n  var commit = _ref3.commit,\n      state = _ref3.state;\n\n  __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].contentText.setText(value);\n\n  debounceSave({ commit: commit, state: state });\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"k\" /* FILE_DIRTY */]);\n};\n\nvar updateContent = function updateContent(_ref4, text) {\n  var commit = _ref4.commit,\n      state = _ref4.state;\n\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"l\" /* EDIT_CONTENT */], text);\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"f\" /* LOAD_BILLS */], text || '{}');\n};\n\nvar renameFile = function renameFile(_ref5, filename) {\n  var commit = _ref5.commit,\n      state = _ref5.state;\n\n  console.log('renaming file');\n  __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].filenameText.setText(filename);\n\n  debounceSave({ commit: commit, state: state });\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"k\" /* FILE_DIRTY */]);\n};\n\nvar updateFilename = function updateFilename(_ref6, filename) {\n  var commit = _ref6.commit,\n      state = _ref6.state;\n\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"o\" /* RENAME_FILE */], filename);\n};\n\nvar loadFile = function loadFile(_ref7, file) {\n  var commit = _ref7.commit,\n      state = _ref7.state;\n\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"p\" /* LOAD_FILE */], file);\n  updateWindowUrl(state.file.metadata);\n};\n\nvar setCollaborators = function setCollaborators(_ref8, collaborators) {\n  var commit = _ref8.commit,\n      state = _ref8.state;\n\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"a\" /* SET_COLLABORATORS */], collaborators);\n};\n\nvar setCursors = function setCursors(_ref9, cursors) {\n  var commit = _ref9.commit,\n      state = _ref9.state;\n\n  commit(__WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"b\" /* SET_CURSORS */], cursors);\n};\n\nfunction updateWindowUrl(fileMetadata) {\n  var queryVars = __WEBPACK_IMPORTED_MODULE_4_querystringify___default.a.parse(window.location.search);\n  queryVars.file = fileMetadata.id;\n  window.history.pushState({}, fileMetadata.name, (window.location.pathname || '') + __WEBPACK_IMPORTED_MODULE_4_querystringify___default.a.stringify(queryVars, true));\n}\n\nfunction updateLocalStorage(fileMetadata) {\n  window.localStorage.setItem('fileMetadata.id', fileMetadata.id);\n}\n\n/***/ }),\n\n/***/ 102:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export STATUS_LIST */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__store_mutation_types__ = __webpack_require__(16);\n\n\nvar _mutations;\n\n\n\nvar STATUS_LIST = {\n  INITIAL: 'INTIAL',\n  SAVING: 'SAVING',\n  SAVED: 'SAVED',\n  NOT_SAVED: 'NOT_SAVED',\n  DIRTY: 'DIRTY',\n  LOADED: 'LOADED'\n};\n\nvar state = {\n  items: {},\n  status: STATUS_LIST.INITIAL\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__store_mutation_types__[\"c\" /* INSERT_BILL */], function (state, _ref) {\n  var index = _ref.index,\n      text = _ref.text;\n\n  state.status = STATUS_LIST.INITIAL;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__store_mutation_types__[\"d\" /* UPDATE_BILL */], function (state, _ref2) {\n  var index = _ref2.index,\n      text = _ref2.text;\n\n  state.status = STATUS_LIST.INITIAL;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__store_mutation_types__[\"e\" /* DELETE_BILL */], function (state, filename) {\n  state.status = STATUS_LIST.INITIAL;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__store_mutation_types__[\"f\" /* LOAD_BILLS */], function (state, fileContent) {\n  state.items = JSON.parse(fileContent);\n  state.status = STATUS_LIST.LOADED;\n}), _mutations);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  mutations: mutations\n});\n\n/***/ }),\n\n/***/ 103:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mutation_types__ = __webpack_require__(16);\n\n\n\nvar _mutations;\n\n\n\nvar state = {\n  users: []\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__mutation_types__[\"a\" /* SET_COLLABORATORS */], function (state, collaborators) {\n  state.users = collaborators;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__mutation_types__[\"b\" /* SET_CURSORS */], function (state, cursors) {\n  state.users = state.users.reduce(function (users, user) {\n    if (cursors[user.sessionId]) {\n      user = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({}, user, { cursor: cursors[user.sessionId] });\n    }\n\n    users.push(user);\n    return users;\n  }, []);\n}), _mutations);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  mutations: mutations\n});\n\n/***/ }),\n\n/***/ 104:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export STATUS_LIST */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(88);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__ = __webpack_require__(16);\n\n\nvar _mutations;\n\n\n\n\nvar STATUS_LIST = {\n  INITIAL: 'INTIAL',\n  SAVING: 'SAVING',\n  SAVED: 'SAVED',\n  NOT_SAVED: 'NOT_SAVED',\n  DIRTY: 'DIRTY'\n};\n\nvar state = {\n  metadata: {\n    name: 'New document',\n    id: 'no-id'\n  },\n  content: '',\n  status: STATUS_LIST.INITIAL\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"g\" /* NEW_FILE */], function (state, name) {\n  state.metadata = {\n    id: null,\n    mimeType: 'text/plain',\n    name: name\n  };\n  state.content = '';\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"h\" /* FILE_SAVED */], function (state, metadata) {\n  __WEBPACK_IMPORTED_MODULE_1_lodash___default.a.assign(state.metadata, metadata);\n  state.status = STATUS_LIST.SAVED;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"i\" /* FILE_NOT_SAVED */], function (state) {\n  state.status = STATUS_LIST.NOT_SAVED;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"j\" /* FILE_SAVING */], function (state) {\n  state.status = STATUS_LIST.SAVING;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"k\" /* FILE_DIRTY */], function (state) {\n  state.status = STATUS_LIST.DIRTY;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"l\" /* EDIT_CONTENT */], function (state, content) {\n  state.content = content;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"m\" /* INSERT_CONTENT */], function (state, _ref) {\n  var index = _ref.index,\n      text = _ref.text;\n\n  var content = state.content;\n  state.content = content.slice(0, index) + text + content.slice(index);\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"n\" /* DELETE_CONTENT */], function (state, _ref2) {\n  var index = _ref2.index,\n      text = _ref2.text;\n\n  var content = state.content;\n  state.content = content.slice(0, index) + content.slice(index + text.length);\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"o\" /* RENAME_FILE */], function (state, filename) {\n  state.metadata.name = filename;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_2__store_mutation_types__[\"p\" /* LOAD_FILE */], function (state, file) {\n  state.metadata = file.metadata;\n  state.content = file.content;\n  state.status = state.status = STATUS_LIST.SAVED;\n}), _mutations);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  mutations: mutations\n});\n\n/***/ }),\n\n/***/ 105:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_querystringify__ = __webpack_require__(90);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_querystringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_querystringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_CreateNewFileDialog__ = __webpack_require__(240);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_CreateNewFileDialog___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_CreateNewFileDialog__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_Bills__ = __webpack_require__(239);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_Bills___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_Bills__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services__ = __webpack_require__(49);\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'app',\n  components: {\n    'bills-view': __WEBPACK_IMPORTED_MODULE_3__components_Bills___default.a,\n    'create-new-file-dialog': __WEBPACK_IMPORTED_MODULE_2__components_CreateNewFileDialog___default.a\n  },\n  data: function data() {\n    return {\n      showLogin: false,\n      items: [],\n      loading: true,\n      error: null,\n      receitas: true,\n      despesas: true,\n      user: null,\n      file: null\n    };\n  },\n\n  mounted: function mounted() {\n    var _this = this;\n\n    var queryVars = __WEBPACK_IMPORTED_MODULE_0_querystringify___default.a.parse(window.location.search);\n    this.user = queryVars.user;\n    this.file = queryVars.file;\n\n    __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].loadDriveApis().then(function () {\n      console.log('starting authorize');\n      __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].authorize(true, _this.user).then(function () {\n        _this.loading = false;\n        return _this.loadThisFile();\n      }).catch(function (reason) {\n        console.log('error inload or authorize');\n        _this.showLogin = true;\n        _this.loading = false;\n      });\n    });\n  },\n  methods: {\n    handleAuthClick: function handleAuthClick() {\n      var _this2 = this;\n\n      this.showLogin = false;\n      __WEBPACK_IMPORTED_MODULE_1__gapi_gapi_integration__[\"a\" /* default */].authorize(false, this.user).then(function () {\n        _this2.loadThisFile();\n      }).catch(function (reason) {\n        console.log(reason);\n      });\n    },\n    loadThisFile: function loadThisFile() {\n      var _this3 = this;\n\n      console.log('load file');\n      console.log(this.file);\n\n      if (this.file) {\n        return __WEBPACK_IMPORTED_MODULE_4__services__[\"a\" /* file */].loadFromGDrive(this.file).catch(function (error) {\n          _this3.errorMessage = error;\n          console.error(error);\n        });\n      } else {\n        this.openCreateNewFile();\n      }\n    },\n    openCreateNewFile: function openCreateNewFile() {\n      this.$refs.create_new_file.openDialog();\n    },\n    tryAgain: function tryAgain() {\n      window.location.reload();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 106:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(91);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__api_js__ = __webpack_require__(97);\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'bills-view',\n  data: function data() {\n    return {\n      selected: [],\n      loading: false,\n      error: null,\n      receitas: true,\n      despesas: true,\n      menuVisible: false\n    };\n  },\n\n  mounted: function mounted() {},\n  created: function created() {\n    console.log(this.items);\n    this.byJovane();\n    this.fetchData();\n  },\n\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    fetchData: function fetchData() {\n      this.error = this.items = null;\n      this.items = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__api_js__[\"a\" /* getBills */])(this.fileContent);\n      console.log(this.items);\n    },\n    byJovane: function byJovane() {\n      console.log('desenvolvido por @jovanepires');\n    },\n\n    changeFilter: function changeFilter(tabIndex) {\n      console.log(this.items);\n      if (tabIndex === 0) {\n        this.receitas = true;\n        this.despesas = true;\n      }\n      if (tabIndex === 1) {\n        this.receitas = false;\n        this.despesas = true;\n      }\n      if (tabIndex === 2) {\n        this.receitas = true;\n        this.despesas = false;\n      }\n    },\n    onSelect: function onSelect(items) {\n      this.selected = items;\n    },\n    getAlternateLabel: function getAlternateLabel(count) {\n      var plural = '';\n\n      if (count > 1) {\n        plural = 's';\n      }\n\n      return 'TOTAL ' + this.total + ' for ' + count + ' item' + plural + ' selected';\n    }\n  }, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* mapActions */])(['editContent'])),\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapState */])({\n    items: function items(state) {\n      return state.bills.items;\n    }\n  }), {\n    allItems: function allItems() {\n      return this.items || {};\n    },\n    negativeItems: function negativeItems() {\n      if (!this.items) {\n        return {};\n      }\n      return this.items.filter(function (item) {\n        return item.value < 0;\n      });\n    },\n    positiveItems: function positiveItems() {\n      if (!this.items) {\n        return {};\n      }\n      return this.items.filter(function (item) {\n        return item.value > 0;\n      });\n    },\n    total: function total() {\n      if (!this.items) {\n        return 0;\n      }\n      var _self = this;\n      var _items = this.selected || this.items;\n      return _items.filter(function (item) {\n        if (_self.receitas && _self.despesas) {\n          return true;\n        }\n        if (_self.receitas) {\n          return item.value > 0;\n        }\n        if (_self.despesas) {\n          return item.value < 0;\n        }\n        return false;\n      }).reduce(function (a, i) {\n        return a + i.value;\n      }, 0);\n    },\n    activeClass: function activeClass() {\n      return this.total >= 0 ? 'green' : 'red';\n    }\n  })\n});\n\n/***/ }),\n\n/***/ 107:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__assets_google_drive_svg__ = __webpack_require__(238);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__assets_google_drive_svg___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__assets_google_drive_svg__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services__ = __webpack_require__(49);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      showDialog: false,\n      filename: 'New document',\n      gdriveSvg: __WEBPACK_IMPORTED_MODULE_0__assets_google_drive_svg___default.a\n    };\n  },\n\n  methods: {\n    openDialog: function openDialog() {\n      this.filename = 'New document';\n      this.showDialog = true;\n    },\n    createNew: function createNew() {\n      this.showDialog = false;\n      __WEBPACK_IMPORTED_MODULE_1__services__[\"a\" /* file */].createNewFile(this.filename);\n    },\n    openFromGDrive: function openFromGDrive() {\n      var _this = this;\n\n      __WEBPACK_IMPORTED_MODULE_1__services__[\"a\" /* file */].openFromGDrive().then(function () {\n        _this.showDialog = false;\n      }).catch(function (er) {\n        console.info('Canceled gapi picker.');\n        console.info(er);\n      });\n    },\n    updateFilename: function updateFilename($event) {\n      this.filename = $event.value;\n      console.log(this.filename);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 149:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 150:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 16:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return NEW_FILE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return FILE_SAVED; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return FILE_SAVING; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return FILE_NOT_SAVED; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return FILE_DIRTY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return EDIT_CONTENT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"m\", function() { return INSERT_CONTENT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"n\", function() { return DELETE_CONTENT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"o\", function() { return RENAME_FILE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"p\", function() { return LOAD_FILE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SET_COLLABORATORS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return SET_CURSORS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return INSERT_BILL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return UPDATE_BILL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return DELETE_BILL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return LOAD_BILLS; });\n\nvar NEW_FILE = 'NEW_FILE';\nvar FILE_SAVED = 'FILE_SAVED';\nvar FILE_SAVING = 'FILE_SAVING';\nvar FILE_NOT_SAVED = 'FILE_NOT_SAVED';\nvar FILE_DIRTY = 'FILE_DIRTY';\n\nvar EDIT_CONTENT = 'EDIT_CONTENT';\nvar INSERT_CONTENT = 'INSERT_CONTENT';\nvar DELETE_CONTENT = 'DELETE_CONTENT';\nvar RENAME_FILE = 'RENAME_FILE';\nvar LOAD_FILE = 'LOAD_FILE';\n\nvar SET_COLLABORATORS = 'SET_COLLABORATORS';\nvar SET_CURSORS = 'SET_CURSORS';\n\nvar INSERT_BILL = 'INSERT_BILL';\nvar UPDATE_BILL = 'UPDATE_BILL';\nvar DELETE_BILL = 'DELETE_BILL';\nvar LOAD_BILLS = 'LOAD_BILLS';\n\n/***/ }),\n\n/***/ 238:\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgPHBhdGggZmlsbD0iIzAwMDAwMCIgZD0iTTcuNzEsMy41TDEuMTUsMTVMNC41OCwyMUwxMS4xMyw5LjVNOS43MywxNUw2LjMsMjFIMTkuNDJMMjIuODUsMTVNMjIuMjgsMTRMMTUuNDIsMkg4LjU4TDguNTcsMkwxNS40MywxNEgyMi4yOFoiIC8+Cjwvc3ZnPg==\"\n\n/***/ }),\n\n/***/ 239:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(149)\n\nvar Component = __webpack_require__(46)(\n  /* script */\n  __webpack_require__(106),\n  /* template */\n  __webpack_require__(241),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 240:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(46)(\n  /* script */\n  __webpack_require__(107),\n  /* template */\n  __webpack_require__(243),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 241:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('md-app', {\n    attrs: {\n      \"md-waterfall\": \"\",\n      \"md-mode\": \"fixed\"\n    }\n  }, [_c('md-app-toolbar', {\n    staticClass: \"md-large md-dense md-primary\"\n  }, [_c('div', {\n    staticClass: \"md-toolbar-row\"\n  }, [_c('div', {\n    staticClass: \"md-toolbar-section-start\"\n  }, [_c('md-button', {\n    staticClass: \"md-icon-button\",\n    on: {\n      \"click\": function($event) {\n        _vm.menuVisible = !_vm.menuVisible\n      }\n    }\n  }, [_c('md-icon', [_vm._v(\"menu\")])], 1), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-title\"\n  }, [_vm._v(\"My Title\")])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"md-toolbar-section-end\"\n  }, [_c('md-button', {\n    staticClass: \"md-icon-button\"\n  }, [_c('md-icon', [_vm._v(\"more_vert\")])], 1)], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"md-toolbar-row\"\n  }, [_c('md-tabs', {\n    staticClass: \"md-primary\"\n  }, [_c('md-tab', {\n    attrs: {\n      \"id\": \"tab-all\",\n      \"md-label\": \"Tudo\"\n    }\n  }), _vm._v(\" \"), _c('md-tab', {\n    attrs: {\n      \"id\": \"tab-despesas\",\n      \"md-label\": \"Despesas\"\n    }\n  }), _vm._v(\" \"), _c('md-tab', {\n    attrs: {\n      \"id\": \"tab-receitas\",\n      \"md-label\": \"Receitas\"\n    }\n  })], 1)], 1)]), _vm._v(\" \"), _c('md-app-drawer', {\n    attrs: {\n      \"md-active\": _vm.menuVisible\n    },\n    on: {\n      \"update:mdActive\": function($event) {\n        _vm.menuVisible = $event\n      }\n    }\n  }, [_c('md-toolbar', {\n    staticClass: \"md-transparent\",\n    attrs: {\n      \"md-elevation\": \"0\"\n    }\n  }, [_vm._v(\"Navigation\")]), _vm._v(\" \"), _c('md-list', [_c('md-list-item', [_c('md-icon', [_vm._v(\"move_to_inbox\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-list-item-text\"\n  }, [_vm._v(\"Inbox\")])], 1), _vm._v(\" \"), _c('md-list-item', [_c('md-icon', [_vm._v(\"send\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-list-item-text\"\n  }, [_vm._v(\"Sent Mail\")])], 1), _vm._v(\" \"), _c('md-list-item', [_c('md-icon', [_vm._v(\"delete\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-list-item-text\"\n  }, [_vm._v(\"Trash\")])], 1), _vm._v(\" \"), _c('md-list-item', [_c('md-icon', [_vm._v(\"error\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-list-item-text\"\n  }, [_vm._v(\"Spam\")])], 1)], 1)], 1), _vm._v(\" \"), _c('md-app-content', [_c('md-table', {\n    attrs: {\n      \"md-card\": \"\"\n    },\n    on: {\n      \"md-selected\": _vm.onSelect\n    },\n    scopedSlots: _vm._u([{\n      key: \"md-table-row\",\n      fn: function(ref) {\n        var item = ref.item;\n\n        return _c('md-table-row', {\n          attrs: {\n            \"md-selectable\": \"multiple\",\n            \"md-auto-select\": \"\"\n          }\n        }, [_c('md-table-cell', {\n          attrs: {\n            \"md-label\": \"Item\",\n            \"md-sort-by\": \"description\"\n          }\n        }, [_vm._v(_vm._s(item.description))]), _vm._v(\" \"), _c('md-table-cell', {\n          attrs: {\n            \"md-label\": \"Value\",\n            \"md-sort-by\": \"value\"\n          }\n        }, [_vm._v(_vm._s(item.value))])], 1)\n      }\n    }]),\n    model: {\n      value: (_vm.items),\n      callback: function($$v) {\n        _vm.items = $$v\n      },\n      expression: \"items\"\n    }\n  }, [_c('md-table-toolbar', [_c('h3', {\n    staticClass: \"md-title\",\n    staticStyle: {\n      \"flex\": \"1\"\n    }\n  }, [_vm._v(\"TOTAL \" + _vm._s(_vm.total))])])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 242:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('md-dialog', {\n    ref: \"login\",\n    attrs: {\n      \"md-active\": _vm.showLogin\n    },\n    on: {\n      \"update:mdActive\": function($event) {\n        _vm.showLogin = $event\n      }\n    }\n  }, [_c('md-dialog-title', [_vm._v(\"Login\")]), _vm._v(\" \"), _c('md-dialog-content', [_c('p', [_vm._v(\"Please log in with your Google Drive account\")])]), _vm._v(\" \"), _c('md-dialog-actions', [_c('md-button', {\n    staticClass: \"md-primary\",\n    nativeOn: {\n      \"click\": function($event) {\n        return _vm.handleAuthClick($event)\n      }\n    }\n  }, [_vm._v(\"Login\")])], 1)], 1), _vm._v(\" \"), (_vm.loading) ? _c('div', {\n    staticClass: \"loading\"\n  }, [_c('md-progress-spinner', {\n    attrs: {\n      \"md-diameter\": 100,\n      \"md-stroke\": 5,\n      \"md-mode\": \"indeterminate\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), _c('create-new-file-dialog', {\n    ref: \"create_new_file\"\n  }), _vm._v(\" \"), _c('bills-view', {\n    ref: \"bills\"\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 243:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('md-content', [_c('md-dialog', {\n    ref: \"create_new_file\",\n    attrs: {\n      \"md-active\": _vm.showDialog,\n      \"md-click-outside-to-close\": false,\n      \"md-close-on-esc\": false\n    },\n    on: {\n      \"update:mdActive\": function($event) {\n        _vm.showDialog = $event\n      }\n    }\n  }, [_c('md-dialog-title', [_vm._v(\"Create new file\")]), _vm._v(\" \"), _c('md-dialog-content', [_c('md-field', [_c('label', [_vm._v(\"File name\")]), _vm._v(\" \"), _c('md-input', {\n    attrs: {\n      \"v-model\": _vm.filename,\n      \"id\": \"create-filename-input\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('md-dialog-actions', [_c('md-button', {\n    staticClass: \"md-primary\",\n    attrs: {\n      \"id\": \"create-new-file-button\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.createNew()\n      }\n    }\n  }, [_vm._v(\"Create\")]), _vm._v(\" \"), _c('md-button', {\n    attrs: {\n      \"id\": \"open-from-gdrive-button\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.openFromGDrive()\n      }\n    }\n  }, [_vm._v(\"open from Google Drive \"), _c('img', {\n    attrs: {\n      \"src\": _vm.gdriveSvg\n    }\n  })])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(108);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__gapi_multipart__ = __webpack_require__(98);\n\n\n\n\n\n\nvar GApiIntegration = function () {\n  function GApiIntegration() {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, GApiIntegration);\n\n    this.APPLICATION_ID = '233592491629';\n    this.CLIENT_ID = '233592491629-bmrpu85unjgi3612c08vnu0n8832shde.apps.googleusercontent.com';\n    this.SCOPES = ['email', 'profile', 'https://www.googleapis.com/auth/drive', 'https://www.googleapis.com/auth/drive.install'];\n\n    this.DEFAULT_FIELDS = 'capabilities(canCopy,canEdit),createdTime,fileExtension,id,mimeType,modifiedTime,name,shared,size,version';\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(GApiIntegration, [{\n    key: 'loadDriveApis',\n    value: function loadDriveApis() {\n      return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        (function waitForApi() {\n          console.info('loadDriveApi...');\n          if (gapi && gapi.client) {\n            __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all([gapi.client.load('drive', 'v3'), gapi.load('picker'), gapi.load('drive-share'), gapi.load('drive-realtime')]).then(function () {\n              console.info('gapi.client.load finished!');\n              resolve();\n            });\n          } else {\n            setTimeout(function () {\n              return waitForApi();\n            }, 100);\n            console.info('wait for it...');\n          }\n        })();\n      });\n    }\n  }, {\n    key: 'authorize',\n    value: function authorize() {\n      var _this = this;\n\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var user = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      console.info('authorize');\n      return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        gapi.auth.authorize(_this.buildAuthRequest(immediate, user), function (authResult) {\n          console.info('RESULT!!!!!!!!');\n          if (authResult && !authResult.error) {\n            console.info('resolved!');\n            resolve();\n          } else {\n            console.info('rejected!');\n            reject('Sorry, you are not allowed to open the file...');\n          }\n        });\n      });\n    }\n  }, {\n    key: 'buildAuthRequest',\n    value: function buildAuthRequest(immediateMode, user) {\n      var request = {\n        client_id: this.CLIENT_ID,\n        scope: this.SCOPES.join(' '),\n        immediate: immediateMode\n      };\n      if (user) {\n        request.login_hint = user;\n        request.authuser = -1;\n      }\n      return request;\n    }\n  }, {\n    key: 'saveFile',\n    value: function saveFile(file, filename, mimeType) {\n      var path;\n      var method;\n\n      if (file.metadata.id) {\n        path = '/upload/drive/v3/files/' + encodeURIComponent(file.metadata.id);\n        method = 'PATCH';\n      } else {\n        path = '/upload/drive/v3/files';\n        method = 'POST';\n      }\n\n      var metadata = { mimeType: mimeType || file.metadata.mimeType, name: filename || file.metadata.name };\n\n      var multipart = new __WEBPACK_IMPORTED_MODULE_4__gapi_multipart__[\"a\" /* default */]().append('application/json', __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(metadata)).append(file.metadata.mimeType, file.content || '').finish();\n\n      return gapi.client.request({\n        path: path,\n        method: method,\n        params: {\n          uploadType: 'multipart',\n          fields: this.DEFAULT_FIELDS\n        },\n        headers: { 'Content-Type': multipart.type },\n        body: multipart.body\n      });\n    }\n  }, {\n    key: 'combineAndStoreResults',\n    value: function combineAndStoreResults(metadata, content) {\n      var file = {\n        metadata: metadata,\n        content: content\n      };\n      return file;\n    }\n  }, {\n    key: 'loadFile',\n    value: function loadFile(fileId) {\n      var _this2 = this;\n\n      return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        var metadataRequest = gapi.client.drive.files.get({\n          fileId: fileId,\n          fields: _this2.DEFAULT_FIELDS\n        });\n        var contentRequest = gapi.client.drive.files.get({\n          fileId: fileId,\n          alt: 'media'\n        });\n\n        resolve(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all([metadataRequest, contentRequest]));\n      }).then(function (responses) {\n        return { metadata: responses[0].result, content: responses[1].body };\n      });\n    }\n  }, {\n    key: 'loadRtDoc',\n    value: function loadRtDoc(file, contentEventHandler, filenameEventHandler, collaboratorEventHandler, cursorsMapEventHandler) {\n      var _this3 = this;\n\n      var that = this;\n      return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        gapi.drive.realtime.load(file.metadata.id, function (doc) {\n          console.log('loaded realtime doc', doc);\n\n          that.contentText = doc.getModel().getRoot().get('content');\n          that.contentText.addEventListener(gapi.drive.realtime.EventType.TEXT_INSERTED, contentEventHandler);\n          that.contentText.addEventListener(gapi.drive.realtime.EventType.TEXT_DELETED, contentEventHandler);\n\n          that.filenameText = doc.getModel().getRoot().get('filename');\n          that.filenameText.addEventListener(gapi.drive.realtime.EventType.TEXT_INSERTED, filenameEventHandler);\n          that.filenameText.addEventListener(gapi.drive.realtime.EventType.TEXT_DELETED, filenameEventHandler);\n\n          doc.addEventListener(gapi.drive.realtime.EventType.COLLABORATOR_JOINED, collaboratorEventHandler);\n          doc.addEventListener(gapi.drive.realtime.EventType.COLLABORATOR_LEFT, collaboratorEventHandler);\n          collaboratorEventHandler({ target: doc, type: 'init_collaborators' });\n\n          that.cursorsMap = doc.getModel().getRoot().get('cursors');\n          that.cursorsMap.addEventListener(gapi.drive.realtime.EventType.VALUE_CHANGED, cursorsMapEventHandler);\n\n          resolve(doc.getModel());\n        }, function (model) {\n          console.log('initializing model', model);\n\n          var contentString = model.createString(file.content);\n          model.getRoot().set('content', contentString);\n\n          var filenameString = model.createString(file.content);\n          model.getRoot().set('filename', filenameString);\n\n          that.cursorsMap = model.createMap();\n          model.getRoot().set('cursors', that.cursorsMap);\n        }, function (error) {\n          console.log('failed realtime load', error);\n          if (error.type === window.gapi.drive.realtime.ErrorType.TOKEN_REFRESH_REQUIRED) {\n            _this3.authorize(true).then(function () {\n              _this3.loadRtDoc(file, contentEventHandler, filenameEventHandler, collaboratorEventHandler, cursorsMapEventHandler);\n            }).catch(function () {\n              reject('Could not authorize');\n            });\n          } else if (error.type === window.gapi.drive.realtime.ErrorType.CLIENT_ERROR) {\n            reject('An Error happened: ' + error.message);\n          } else if (error.type === window.gapi.drive.realtime.ErrorType.NOT_FOUND) {\n            reject('The file does not exist or you do not have permissions to access it.');\n          } else if (error.type === window.gapi.drive.realtime.ErrorType.FORBIDDEN) {\n            reject('You do not have access to this file. Try having the owner share it with you from Google Drive.');\n            window.location.href = '/';\n          }\n        });\n      });\n    }\n  }, {\n    key: 'showPicker',\n    value: function showPicker() {\n      return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        var view = new google.picker.DocsView(google.picker.ViewId.DOCS);\n\n        view.setSelectFolderEnabled(true);\n        view.setIncludeFolders(true);\n        var picker = new google.picker.PickerBuilder().setAppId('233592491629').setOAuthToken(gapi.auth.getToken().access_token).addView(view).setCallback(function (data) {\n          if (data.action === 'picked') {\n            var id = data.docs[0].id;\n            resolve(id);\n          } else if (data.action === 'cancel') {\n            reject('cancel');\n          }\n        }).build();\n        picker.setVisible(true);\n      });\n    }\n  }, {\n    key: 'showSharing',\n    value: function showSharing(id) {\n      var share = new gapi.drive.share.ShareClient('233592491629');\n      share.setOAuthToken(gapi.auth.getToken().access_token);\n      share.setItemIds([id]);\n      share.showSettingsDialog();\n    }\n  }]);\n\n  return GApiIntegration;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new GApiIntegration());\n\n/***/ }),\n\n/***/ 48:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(91);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store_modules_file__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__store_modules_bills__ = __webpack_require__(102);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__store_modules_collaborators__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__store_actions__ = __webpack_require__(101);\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* default */]);\nconsole.log('Using Vuex');\n\nvar debug = \"production\" !== 'production';\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* default */].Store({\n  actions: __WEBPACK_IMPORTED_MODULE_5__store_actions__,\n\n  modules: {\n    file: __WEBPACK_IMPORTED_MODULE_2__store_modules_file__[\"a\" /* default */],\n    bills: __WEBPACK_IMPORTED_MODULE_3__store_modules_bills__[\"a\" /* default */],\n    collaborators: __WEBPACK_IMPORTED_MODULE_4__store_modules_collaborators__[\"a\" /* default */]\n  },\n  strict: debug\n}));\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__services_file__ = __webpack_require__(100);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__services_file__[\"a\"]; });\n\n\n/***/ }),\n\n/***/ 93:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 95:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(150)\n\nvar Component = __webpack_require__(46)(\n  /* script */\n  __webpack_require__(105),\n  /* template */\n  __webpack_require__(242),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 97:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export onGapiLoaded */\n/* unused harmony export defaultBill */\n/* unused harmony export storeBills */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getBills;\n/* unused harmony export getBill */\n/* unused harmony export addBill */\nvar ITEM = {\n  '_id': 0,\n  'description': '',\n  'note': '',\n  'value': 0.00,\n  'currency': 'BRL',\n  'resource': 'carteira',\n  'date': '',\n  'due': '',\n  'tags': []\n};\n\nfunction onGapiLoaded() {\n  console.log('foi');\n}\n\nfunction defaultBill() {\n  return ITEM;\n}\n\nfunction storeBills(obj) {\n  return localStorage.setItem('items', obj);\n}\n\nfunction getBills(fileContent) {\n  return JSON.parse(fileContent);\n}\n\nfunction getBill(id) {\n  return getBills().find(function (x) {\n    return x._id === id;\n  });\n}\n\nfunction addBill(obj) {\n  return storeBills(getBills().push(obj));\n}\n\n/***/ }),\n\n/***/ 98:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n\n\n\nvar _class = function () {\n  function _class() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, _class);\n\n    this.boundary = Math.random().toString(36).slice(2);\n    this.mimeType = 'multipart/mixed; boundary=\"' + this.boundary + '\"';\n    this.parts = [];\n    this.body = null;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(_class, [{\n    key: 'append',\n    value: function append(mimeType, content) {\n      if (this.body !== null) {\n        throw new Error('Builder has already been finalized.');\n      }\n      this.parts.push('\\r\\n--', this.boundary, '\\r\\n', 'Content-Type: ', mimeType, '\\r\\n\\r\\n', content);\n      return this;\n    }\n  }, {\n    key: 'finish',\n    value: function finish() {\n      if (this.parts.length === 0) {\n        throw new Error('No parts have been added.');\n      }\n      if (this.body === null) {\n        this.parts.push('\\r\\n--', this.boundary, '--');\n        this.body = this.parts.join('');\n      }\n      return {\n        type: this.mimeType,\n        body: this.body\n      };\n    }\n  }]);\n\n  return _class;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (_class);\n\n/***/ }),\n\n/***/ 99:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(95);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue_material__ = __webpack_require__(96);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue_material___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_vue_material__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue_material_dist_vue_material_min_css__ = __webpack_require__(94);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue_material_dist_vue_material_min_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_vue_material_dist_vue_material_min_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vue_material_dist_theme_default_css__ = __webpack_require__(93);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vue_material_dist_theme_default_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_vue_material_dist_theme_default_css__);\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].config.productionTip = false;\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_3_vue_material___default.a);\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].filter('currency', function (value) {\n  return 'R$ ' + value.toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,');\n});\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].filter('date', function (value) {\n  var date = new Date(value.replace(/-/g, '/').replace(/T.+/, ''));\n  return date.getDate() + '/' + (date.getMonth() + 1);\n});\n\n__webpack_require__(92).polyfill();\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"]({\n  store: __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */],\n  el: '#app',\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App___default.a }\n});\n\n/***/ })\n\n},[99]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.33a11c4b714499b9c32a.js","import GapiIntegration from '@/gapi/gapi-integration'\nimport store from '@/store'\nimport _get from 'lodash/get'\nimport _find from 'lodash/find'\n\n/* global gapi */\n\nexport const file = {\n  model: null,\n\n  /**\n   * Creates a new file\n   * @param  {string} filename\n   * @return {Promise}\n   */\n  createNewFile (filename) {\n    return new Promise(\n      (resolve, reject) => {\n        console.log('creating ' + file)\n        store.dispatch('createNewFile', filename)\n          .then((file) => {\n            GapiIntegration.loadRtDoc(file,\n              this.contentEventHandler,\n              this.filenameEventHandler,\n              this.collaboratorEventHandler,\n              this.cursorsMapEventHandler.bind(this))\n              .then(() => {\n                resolve(file)\n              })\n              .catch(() => {\n                reject('rt file not loaded')\n              })\n          })\n          .catch(() => reject('not loaded'))\n      })\n  },\n\n  /**\n   * Opens a file from GDrive\n   * @return {Promise}\n   */\n  openFromGDrive () {\n    return new Promise(\n      (resolve, reject) => {\n        GapiIntegration.showPicker()\n          .then((id) => {\n            if (id !== _get(store, 'state.file.metadata.id')) {\n              this.loadFromGDrive(id)\n                .then(() => resolve())\n                .then((error) => reject(error))\n            }\n          })\n          .catch(() => {\n            reject('not picked')\n          })\n      })\n  },\n\n  /**\n   * Loads a file from gdrive\n   * @param  {string} id GDrive file id.\n   * @return {Promise}\n   */\n  loadFromGDrive (id) {\n    return new Promise(\n      (resolve, reject) => {\n        GapiIntegration.loadFile(id)\n          .then(file => {\n            store.dispatch('loadFile', file)\n            store.dispatch('updateContent', file.content)\n            resolve(file)\n            return file\n          })\n          // .then((file) => {\n          //   GapiIntegration.loadRtDoc(file,\n          //     this.contentEventHandler,\n          //     this.filenameEventHandler,\n          //     this.collaboratorEventHandler,\n          //     this.cursorsMapEventHandler.bind(this))\n          //     .then(() => {\n          //       store.dispatch('updateContent', GapiIntegration.contentText.getText())\n          //       resolve(file)\n          //     })\n          //     .catch((error) => {\n          //       reject(error)\n          //     })\n          // })\n          .catch((error) => {\n            console.error(error)\n            reject(error.result.error.message)\n          })\n      })\n  },\n\n  contentEventHandler (evt) {\n    // Log the event to the console.\n    console.log('contentEventHandler')\n    store.dispatch('updateContent', GapiIntegration.contentText.getText())\n  },\n\n  filenameEventHandler (evt) {\n    // Log the event to the console.\n    // console.log(evt)\n    console.log('filenameEventHandler: ' + GapiIntegration.filenameText.getText())\n    store.dispatch('updateFilename', GapiIntegration.filenameText.getText())\n  },\n\n  collaboratorEventHandler (evt) {\n    // Log the event to the console.\n    console.log('---------------- collaboratorEventHandler: ' + (evt ? evt.type : 'none'))\n    console.log(evt.target.getCollaborators().length + 'COLLABORATORS')\n    evt.target.getCollaborators().forEach((collaborator) => {\n      console.log('User ID:' + collaborator.userId)\n      console.log('Session ID:' + collaborator.sessionId)\n      console.log('Name:' + collaborator.displayName)\n      console.log('Color:' + collaborator.color)\n      console.log('IS_ME: ' + collaborator.isMe)\n    })\n\n    store.dispatch('setCollaborators', evt.target.getCollaborators())\n  },\n\n  moveCursor (pos) {\n    this.getMyRegisteredReference(pos).index = pos\n  },\n\n  cursorsMapEventHandler (evt) {\n    store.dispatch('setCursors', this.getCursors())\n  },\n\n  getCursors () {\n    const cursorsMap = this.garbageCollectCursors()\n    const keys = cursorsMap.keys()\n    let cursors = {}\n    for (let i = 0; i < keys.length; i++) {\n      cursors[keys[i]] = cursorsMap.get(keys[i]).index\n    }\n\n    return cursors\n  },\n\n  garbageCollectCursors: function () {\n    const cursorsMap = GapiIntegration.cursorsMap\n    const keys = cursorsMap.keys()\n    for (let i = 0; i < keys.length; i++) {\n      //\n      if (!this.getCollaborator(keys[i])) {\n        cursorsMap.delete(keys[i])\n      } else {\n        cursorsMap.get(keys[i]).removeAllEventListeners()\n        cursorsMap.get(keys[i]).addEventListener(\n          gapi.drive.realtime.EventType.REFERENCE_SHIFTED,\n          this.onReferenceShifted.bind(this))\n      }\n    }\n\n    return cursorsMap\n  },\n\n  getCollaborator: function (sessionId) {\n    const collaborators = _get(store, 'state.collaborators.users')\n    if (!collaborators) {\n      return null\n    }\n    return _find(collaborators, {'sessionId': sessionId})\n  },\n\n  getMyCollaborator: function () {\n    const collaborators = _get(store, 'state.collaborators.users')\n    if (!collaborators) {\n      return null\n    }\n    return _find(collaborators, {'isMe': true})\n  },\n\n  getMyRegisteredReference: function (pos) {\n    const cursorsMap = GapiIntegration.cursorsMap\n    if (!cursorsMap) {\n      return null\n    }\n\n    // if there is no registered reference, create it\n    const myRegisteredReference = cursorsMap.get(this.getMyCollaborator().sessionId)\n    if (myRegisteredReference) {\n      return myRegisteredReference\n    }\n    let myNewRegisteredReference = GapiIntegration.contentText.registerReference(pos, true)\n    myNewRegisteredReference.addEventListener(gapi.drive.realtime.EventType.REFERENCE_SHIFTED, this.onReferenceShifted.bind(this))\n    GapiIntegration.cursorsMap.set(this.getMyCollaborator().sessionId, myNewRegisteredReference)\n    return myNewRegisteredReference\n  },\n\n  onReferenceShifted: function () {\n    store.dispatch('setCursors', this.getCursors())\n  },\n\n  /**\n   * Opens GDrive share screen\n   * @param  {string} id GDrive file id.\n   */\n  share () {\n    return GapiIntegration.showSharing(_get(store, 'state.file.metadata.id'))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/file.js","import GapiIntegration from '@/gapi/gapi-integration'\nimport * as types from '@/store/mutation-types'\nimport _ from 'lodash'\nimport qs from 'querystringify'\n\nexport const createNewFile = ({commit, state}, filename) => {\n  console.log('Creating new file')\n  commit(types.NEW_FILE, filename)\n\n  return new Promise((resolve, reject) => {\n    GapiIntegration.saveFile(state.file, filename)\n      .then(\n        (result) => commit(types.FILE_SAVED, result.result),\n        (reason) => commit(types.FILE_NOT_SAVED))\n      .then(() => {\n        updateWindowUrl(state.file.metadata)\n        updateLocalStorage(state.file.metadata)\n      })\n      .then(() => { resolve(state.file) })\n  })\n}\n\nexport const saveFile = ({commit, state}) => {\n  console.log('Saving new file')\n  commit(types.FILE_SAVING)\n\n  return new Promise((resolve, reject) => {\n    GapiIntegration.saveFile(state.file)\n    .then(\n      (result) => {\n        commit(types.FILE_SAVED, result.result)\n        resolve()\n      },\n      (reason) => {\n        commit(types.FILE_NOT_SAVED)\n        reject(reason)\n      }\n    )\n  })\n}\n\nlet debounceSave = _.debounce(saveFile, 2000)\n\nexport const editContent = ({commit, state}, value) => {\n  // console.log('Editing file content: ' + value)\n  // commit(types.EDIT_CONTENT, value)\n  GapiIntegration.contentText.setText(value)\n  // save file / sync with google realtime api\n  debounceSave({commit, state})\n  commit(types.FILE_DIRTY)\n}\n\nexport const updateContent = ({commit, state}, text) => {\n  // console.log('Updating realtime file content: ', text)\n  commit(types.EDIT_CONTENT, text)\n  commit(types.LOAD_BILLS, (text || '{}'))\n  // if (type === 'text_inserted') {\n  //   commit(types.INSERT_CONTENT, { index, text })\n  // } else if (type === 'text_deleted') {\n  //   commit(types.DELETE_CONTENT, { index, text })\n  // }\n}\n\nexport const renameFile = ({commit, state}, filename) => {\n  console.log('renaming file')\n  GapiIntegration.filenameText.setText(filename)\n\n  // save file / sync with google realtime api\n  debounceSave({commit, state})\n  commit(types.FILE_DIRTY)\n}\n\nexport const updateFilename = ({commit, state}, filename) => {\n  commit(types.RENAME_FILE, filename)\n}\n\nexport const loadFile = ({commit, state}, file) => {\n  commit(types.LOAD_FILE, file)\n  updateWindowUrl(state.file.metadata)\n}\n\nexport const setCollaborators = ({commit, state}, collaborators) => {\n  commit(types.SET_COLLABORATORS, collaborators)\n}\n\nexport const setCursors = ({commit, state}, cursors) => {\n  commit(types.SET_CURSORS, cursors)\n}\n\nfunction updateWindowUrl (fileMetadata) {\n  let queryVars = qs.parse(window.location.search)\n  queryVars.file = fileMetadata.id\n  window.history.pushState({}, fileMetadata.name, (window.location.pathname || '') + qs.stringify(queryVars, true))\n}\n\nfunction updateLocalStorage (fileMetadata) {\n  window.localStorage.setItem('fileMetadata.id', fileMetadata.id)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","import {\n  INSERT_BILL,\n  UPDATE_BILL,\n  DELETE_BILL,\n  LOAD_BILLS\n} from '@/store/mutation-types'\n\nexport const STATUS_LIST = {\n  INITIAL: 'INTIAL',\n  SAVING: 'SAVING',\n  SAVED: 'SAVED',\n  NOT_SAVED: 'NOT_SAVED',\n  DIRTY: 'DIRTY',\n  LOADED: 'LOADED'\n}\n\nconst state = {\n  items: {},\n  status: STATUS_LIST.INITIAL\n}\n\nconst mutations = {\n  // [INSERT_BILL] (state, name) {\n  //   state.metadata = {\n  //     id: null,\n  //     mimeType: 'text/plain',\n  //     name: name\n  //   }\n  //   state.content = ''\n  // },\n  //\n  // [FILE_SAVED] (state, metadata) {\n  //   _.assign(state.metadata, metadata)\n  //   state.status = STATUS_LIST.SAVED\n  // },\n  //\n  // [FILE_NOT_SAVED] (state) {\n  //   state.status = STATUS_LIST.NOT_SAVED\n  // },\n  //\n  // [FILE_SAVING] (state) {\n  //   state.status = STATUS_LIST.SAVING\n  // },\n  //\n  // [FILE_DIRTY] (state) {\n  //   state.status = STATUS_LIST.DIRTY\n  // },\n  //\n  // [EDIT_CONTENT] (state, content) {\n  //   state.content = content\n  // },\n\n  [INSERT_BILL] (state, {index, text}) {\n    state.status = STATUS_LIST.INITIAL\n  },\n\n  [UPDATE_BILL] (state, { index, text }) {\n    state.status = STATUS_LIST.INITIAL\n  },\n\n  [DELETE_BILL] (state, filename) {\n    state.status = STATUS_LIST.INITIAL\n  },\n\n  [LOAD_BILLS] (state, fileContent) {\n    state.items = JSON.parse(fileContent)\n    state.status = STATUS_LIST.LOADED\n  }\n}\n\nexport default {\n  state,\n  mutations\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/bills.js","import {\n  SET_COLLABORATORS,\n  SET_CURSORS\n} from '../mutation-types'\n\nconst state = {\n  users: []\n}\n\nconst mutations = {\n  [SET_COLLABORATORS] (state, collaborators) {\n    state.users = collaborators\n  },\n\n  [SET_CURSORS] (state, cursors) {\n    state.users = state.users.reduce((users, user) => {\n      if (cursors[user.sessionId]) {\n        user = { ...user, cursor: cursors[user.sessionId] }\n      }\n\n      users.push(user)\n      return users\n    }, [])\n  }\n}\n\nexport default {\n  state,\n  mutations\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/collaborators.js","import _ from 'lodash'\nimport {\n  NEW_FILE,\n  FILE_SAVED,\n  FILE_SAVING,\n  FILE_NOT_SAVED,\n  FILE_DIRTY,\n  EDIT_CONTENT,\n  INSERT_CONTENT,\n  DELETE_CONTENT,\n  RENAME_FILE,\n  LOAD_FILE\n} from '@/store/mutation-types'\n\nexport const STATUS_LIST = {\n  INITIAL: 'INTIAL',\n  SAVING: 'SAVING',\n  SAVED: 'SAVED',\n  NOT_SAVED: 'NOT_SAVED',\n  DIRTY: 'DIRTY'\n}\n\nconst state = {\n  metadata: {\n    name: 'New document',\n    id: 'no-id'\n  },\n  content: '',\n  status: STATUS_LIST.INITIAL\n}\n\nconst mutations = {\n  [NEW_FILE] (state, name) {\n    state.metadata = {\n      id: null,\n      mimeType: 'text/plain',\n      name: name\n    }\n    state.content = ''\n  },\n\n  [FILE_SAVED] (state, metadata) {\n    _.assign(state.metadata, metadata)\n    state.status = STATUS_LIST.SAVED\n  },\n\n  [FILE_NOT_SAVED] (state) {\n    state.status = STATUS_LIST.NOT_SAVED\n  },\n\n  [FILE_SAVING] (state) {\n    state.status = STATUS_LIST.SAVING\n  },\n\n  [FILE_DIRTY] (state) {\n    state.status = STATUS_LIST.DIRTY\n  },\n\n  [EDIT_CONTENT] (state, content) {\n    state.content = content\n  },\n\n  [INSERT_CONTENT] (state, {index, text}) {\n    const content = state.content\n    state.content = content.slice(0, index) + text + content.slice(index)\n  },\n\n  [DELETE_CONTENT] (state, { index, text }) {\n    const content = state.content\n    state.content = content.slice(0, index) + content.slice(index + text.length)\n  },\n\n  [RENAME_FILE] (state, filename) {\n    state.metadata.name = filename\n  },\n\n  [LOAD_FILE] (state, file) {\n    state.metadata = file.metadata\n    state.content = file.content\n    state.status = state.status = STATUS_LIST.SAVED\n  }\n}\n\nexport default {\n  state,\n  mutations\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/file.js","<template>\n  <div id=\"app\">\n    <md-dialog ref=\"login\" :md-active.sync=\"showLogin\">\n      <md-dialog-title>Login</md-dialog-title>\n      <md-dialog-content>\n        <p>Please log in with your Google Drive account</p>\n      </md-dialog-content>\n      <md-dialog-actions>\n        <md-button class=\"md-primary\" @click.native=\"handleAuthClick\">Login</md-button>\n      </md-dialog-actions>\n    </md-dialog>\n    <div class=\"loading\" v-if=\"loading\">\n      <md-progress-spinner :md-diameter=\"100\" :md-stroke=\"5\" md-mode=\"indeterminate\"></md-progress-spinner>\n    </div>\n    <create-new-file-dialog ref=\"create_new_file\"></create-new-file-dialog>\n    <bills-view ref=\"bills\"></bills-view>\n  </div>\n</template>\n\n<script>\n// import 'mdbootstrap/css/bootstrap.min.css'\n// import 'mdbootstrap/css/mdb.min.css'\n// import 'mdbootstrap/js/bootstrap.min.js'\n// import 'mdbootstrap/js/mdb.min.js'\nimport qs from 'querystringify'\n// import { storeBills } from '@/api.js'\nimport GapiIntegration from '@/gapi/gapi-integration'\nimport CreateNewFileDialog from '@/components/CreateNewFileDialog'\nimport Bills from '@/components/Bills'\nimport { file } from '@/services'\n\nexport default {\n  name: 'app',\n  components: {\n    'bills-view': Bills,\n    'create-new-file-dialog': CreateNewFileDialog\n  },\n  data () {\n    return {\n      showLogin: false,\n      items: [],\n      loading: true,\n      error: null,\n      receitas: true,\n      despesas: true,\n      user: null,\n      file: null\n    }\n  },\n  mounted: function () {\n    let queryVars = qs.parse(window.location.search)\n    this.user = queryVars.user\n    this.file = queryVars.file // window.localStorage.getItem('fileMetadata.id')\n\n    GapiIntegration.loadDriveApis()\n      .then(() => {\n        console.log('starting authorize')\n        GapiIntegration.authorize(true, this.user)\n          .then(() => {\n            this.loading = false\n            return this.loadThisFile()\n          })\n          .catch((reason) => {\n            console.log('error inload or authorize')\n            this.showLogin = true\n            this.loading = false\n          })\n      })\n  },\n  methods: {\n    handleAuthClick () {\n      this.showLogin = false\n      GapiIntegration.authorize(false, this.user)\n        .then(() => {\n          this.loadThisFile()\n        })\n        .catch((reason) => {\n          console.log(reason)\n        })\n    },\n    loadThisFile () {\n      console.log('load file')\n      console.log(this.file)\n      // if no file id in URL, open create dialog\n      if (this.file) {\n        return file.loadFromGDrive(this.file)\n          .catch((error) => {\n            this.errorMessage = error\n            console.error(error)\n            // this.$refs.errorMessage.open()\n          })\n      } else {\n        this.openCreateNewFile()\n      }\n    },\n    openCreateNewFile () {\n      this.$refs.create_new_file.openDialog()\n    },\n    tryAgain () {\n      window.location.reload()\n    }\n  }\n}\n</script>\n\n<style>\n  /* fix google picker conflict with vue-material */\n  .picker-frame.picker-dialog-frame {\n    height: 100% !important;\n  }\n\n  /* mobile friendly */\n  @media (max-width: 1024px) {\n    .picker.picker-dialog {\n      top: 0 !important;\n      height: 100% !important;\n    }\n\n    .picker.picker-dialog > .picker.picker-dialog-content {\n      height: 100% !important;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?24c59cd0","<template>\n  <md-app md-waterfall md-mode=\"fixed\">\n    <md-app-toolbar class=\"md-large md-dense md-primary\">\n      <div class=\"md-toolbar-row\">\n        <div class=\"md-toolbar-section-start\">\n          <md-button class=\"md-icon-button\" @click=\"menuVisible = !menuVisible\">\n            <md-icon>menu</md-icon>\n          </md-button>\n\n          <span class=\"md-title\">My Title</span>\n        </div>\n\n        <div class=\"md-toolbar-section-end\">\n          <md-button class=\"md-icon-button\">\n            <md-icon>more_vert</md-icon>\n          </md-button>\n        </div>\n      </div>\n\n      <div class=\"md-toolbar-row\">\n        <md-tabs class=\"md-primary\">\n          <md-tab id=\"tab-all\" md-label=\"Tudo\"></md-tab>\n          <md-tab id=\"tab-despesas\" md-label=\"Despesas\"></md-tab>\n          <md-tab id=\"tab-receitas\" md-label=\"Receitas\"></md-tab>\n        </md-tabs>\n      </div>\n    </md-app-toolbar>\n\n    <md-app-drawer :md-active.sync=\"menuVisible\">\n      <md-toolbar class=\"md-transparent\" md-elevation=\"0\">Navigation</md-toolbar>\n\n      <md-list>\n        <md-list-item>\n          <md-icon>move_to_inbox</md-icon>\n          <span class=\"md-list-item-text\">Inbox</span>\n        </md-list-item>\n\n        <md-list-item>\n          <md-icon>send</md-icon>\n          <span class=\"md-list-item-text\">Sent Mail</span>\n        </md-list-item>\n\n        <md-list-item>\n          <md-icon>delete</md-icon>\n          <span class=\"md-list-item-text\">Trash</span>\n        </md-list-item>\n\n        <md-list-item>\n          <md-icon>error</md-icon>\n          <span class=\"md-list-item-text\">Spam</span>\n        </md-list-item>\n      </md-list>\n    </md-app-drawer>\n\n    <md-app-content>\n      <md-table v-model=\"items\" md-card @md-selected=\"onSelect\">\n        <md-table-toolbar>\n          <h3 class=\"md-title\" style=\"flex: 1\">TOTAL {{ total }}</h3>\n        </md-table-toolbar>\n\n        <!-- <md-table-toolbar slot=\"md-table-alternate-header\" slot-scope=\"{ count }\">\n          <div class=\"md-toolbar-section-start\">{{ getAlternateLabel(count) }}</div>\n\n          <div class=\"md-toolbar-section-end\">\n            <md-button class=\"md-icon-button\">\n              <md-icon>delete</md-icon>\n            </md-button>\n          </div>\n        </md-table-toolbar> -->\n\n        <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\" md-selectable=\"multiple\" md-auto-select>\n          <md-table-cell md-label=\"Item\" md-sort-by=\"description\">{{ item.description }}</md-table-cell>\n          <md-table-cell md-label=\"Value\" md-sort-by=\"value\">{{ item.value }}</md-table-cell>\n        </md-table-row>\n      </md-table>\n    </md-app-content>\n  </md-app>\n</template>\n\n<!-- <script async defer src=\"https://apis.google.com/js/api.js\"></script> -->\n\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport { getBills } from '../api.js'\n\nexport default {\n  name: 'bills-view',\n  data () {\n    return {\n      // items: {},\n      selected: [],\n      loading: false,\n      error: null,\n      receitas: true,\n      despesas: true,\n      menuVisible: false\n    }\n  },\n  mounted: function () {\n    // this.items = getBills(this.fileContent)\n    // GapiIntegration.loadDriveApis()\n    //   .then(() => {\n    //     console.log('starting authorize')\n    //     GapiIntegration.authorize(true, this.user)\n    //       .then(() => {\n    //         return this.loadThisFile()\n    //       })\n    //       .catch((reason) => {\n    //         console.log('error inload or authorize')\n    //         this.$refs.login.open()\n    //       })\n    //   })\n  },\n  created () {\n    console.log(this.items)\n    this.byJovane()\n    this.fetchData()\n  },\n  methods: {\n    fetchData () {\n      this.error = this.items = null\n      this.items = getBills(this.fileContent)\n      console.log(this.items)\n    },\n    byJovane () {\n      console.log('desenvolvido por @jovanepires')\n    },\n    changeFilter: function (tabIndex) {\n      console.log(this.items)\n      if (tabIndex === 0) {\n        this.receitas = true\n        this.despesas = true\n      }\n      if (tabIndex === 1) {\n        this.receitas = false\n        this.despesas = true\n      }\n      if (tabIndex === 2) {\n        this.receitas = true\n        this.despesas = false\n      }\n    },\n    onSelect (items) {\n      this.selected = items\n    },\n    getAlternateLabel (count) {\n      let plural = ''\n\n      if (count > 1) {\n        plural = 's'\n      }\n\n      return `TOTAL ${this.total} for ${count} item${plural} selected`\n    },\n    ...mapActions([\n      'editContent'\n    ])\n  },\n  computed: {\n    ...mapState({\n      items: state => state.bills.items\n    }),\n    allItems: function () {\n      // this.items = getBills(this.fileContent || '{}')\n      return this.items || {}\n    },\n    negativeItems: function () {\n      if (!this.items) {\n        return {}\n      }\n      return this.items.filter(function (item) {\n        return item.value < 0\n      })\n    },\n    positiveItems: function () {\n      if (!this.items) {\n        return {}\n      }\n      return this.items.filter(function (item) {\n        return item.value > 0\n      })\n    },\n    total: function () {\n      if (!this.items) {\n        return 0\n      }\n      let _self = this\n      let _items = this.selected || this.items\n      return _items.filter(function (item) {\n        if (_self.receitas && _self.despesas) {\n          return true\n        }\n        if (_self.receitas) {\n          return item.value > 0\n        }\n        if (_self.despesas) {\n          return item.value < 0\n        }\n        return false\n      }).reduce(function (a, i) {\n        return a + i.value\n      }, 0)\n    },\n    activeClass: function () {\n      return this.total >= 0 ? 'green' : 'red'\n    }\n  }\n}\n</script>\n<style>\n  /*body { padding-bottom: 70px; }*/\n\n  table {\n    background: #ffffff;\n  }\n  .bills header {\n    text-align: center;\n    color: #fff;\n    /*border-bottom: 1px solid #ededed;*/\n  }\n  .bills header.positive {\n    background-color: #1abc9c !important;\n  }\n  .bills header.negative {\n    background-color: #e74c3c !important;\n  }\n  .header-title {\n    outline: none;\n    position: relative;\n    margin: 0 auto;\n  }\n  .header-title-inner {\n    line-height: 20px;\n    padding: 6px 0;\n    position: relative;\n  }\n  .header-content {\n    font-size: 25px;\n    padding-top: 20px;\n    position: relative;\n    margin: 0 auto;\n    width: 100%;\n  }\n\n\n  .float-date{\n    font-size: 9px;\n    display: flex;\n    flex: 1;\n  }\n  .loading {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    overflow: hidden;\n  }\n  .md-spinner {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    height: 50%;\n    transform: translate(-50%, -50%);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Bills.vue?6da42e4b","<template>\n  <md-content>\n    <md-dialog ref=\"create_new_file\" :md-active.sync=\"showDialog\" :md-click-outside-to-close=\"false\" :md-close-on-esc=\"false\">\n      <md-dialog-title>Create new file</md-dialog-title>\n      <md-dialog-content>\n        <md-field>\n          <label>File name</label>\n          <md-input :v-model=\"filename\" id=\"create-filename-input\"></md-input>\n        </md-field>\n      </md-dialog-content>\n      <md-dialog-actions>\n        <md-button class=\"md-primary\" @click.native=\"createNew()\" id='create-new-file-button'>Create</md-button>\n        <md-button @click.native=\"openFromGDrive()\" id='open-from-gdrive-button'>open from Google Drive <img v-bind:src=\"gdriveSvg\" /></md-button>\n      </md-dialog-actions>\n    </md-dialog>\n  </md-content>\n</template>\n\n<script>\nimport gdriveSvg from '@/assets/google-drive.svg'\nimport { file } from '@/services'\n\nexport default {\n  data () {\n    return {\n      showDialog: false,\n      filename: 'New document',\n      gdriveSvg\n    }\n  },\n  methods: {\n    openDialog () {\n      this.filename = 'New document'\n      this.showDialog = true\n    },\n    createNew () {\n      this.showDialog = false\n      file.createNewFile(this.filename)\n    },\n    openFromGDrive () {\n      file.openFromGDrive()\n        .then(() => { this.showDialog = false })\n        .catch((er) => {\n          console.info('Canceled gapi picker.')\n          console.info(er)\n        })\n    },\n    updateFilename ($event) {\n      this.filename = $event.value\n      console.log(this.filename)\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// CreateNewFileDialog.vue?d9420d7c","// file mutations\nexport const NEW_FILE = 'NEW_FILE'\nexport const FILE_SAVED = 'FILE_SAVED'\nexport const FILE_SAVING = 'FILE_SAVING'\nexport const FILE_NOT_SAVED = 'FILE_NOT_SAVED'\nexport const FILE_DIRTY = 'FILE_DIRTY'\n\nexport const EDIT_CONTENT = 'EDIT_CONTENT'\nexport const INSERT_CONTENT = 'INSERT_CONTENT'\nexport const DELETE_CONTENT = 'DELETE_CONTENT'\nexport const RENAME_FILE = 'RENAME_FILE'\nexport const LOAD_FILE = 'LOAD_FILE'\n\n// collaborator mutations\nexport const SET_COLLABORATORS = 'SET_COLLABORATORS'\nexport const SET_CURSORS = 'SET_CURSORS'\n\n// bill mutations\nexport const INSERT_BILL = 'INSERT_BILL'\nexport const UPDATE_BILL = 'UPDATE_BILL'\nexport const DELETE_BILL = 'DELETE_BILL'\nexport const LOAD_BILLS = 'LOAD_BILLS'\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutation-types.js","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgPHBhdGggZmlsbD0iIzAwMDAwMCIgZD0iTTcuNzEsMy41TDEuMTUsMTVMNC41OCwyMUwxMS4xMyw5LjVNOS43MywxNUw2LjMsMjFIMTkuNDJMMjIuODUsMTVNMjIuMjgsMTRMMTUuNDIsMkg4LjU4TDguNTcsMkwxNS40MywxNEgyMi4yOFoiIC8+Cjwvc3ZnPg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/google-drive.svg\n// module id = 238\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-67935b62\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Bills.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Bills.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-67935b62\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Bills.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Bills.vue\n// module id = 239\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CreateNewFileDialog.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b33cb8c4\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CreateNewFileDialog.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CreateNewFileDialog.vue\n// module id = 240\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('md-app', {\n    attrs: {\n      \"md-waterfall\": \"\",\n      \"md-mode\": \"fixed\"\n    }\n  }, [_c('md-app-toolbar', {\n    staticClass: \"md-large md-dense md-primary\"\n  }, [_c('div', {\n    staticClass: \"md-toolbar-row\"\n  }, [_c('div', {\n    staticClass: \"md-toolbar-section-start\"\n  }, [_c('md-button', {\n    staticClass: \"md-icon-button\",\n    on: {\n      \"click\": function($event) {\n        _vm.menuVisible = !_vm.menuVisible\n      }\n    }\n  }, [_c('md-icon', [_vm._v(\"menu\")])], 1), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-title\"\n  }, [_vm._v(\"My Title\")])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"md-toolbar-section-end\"\n  }, [_c('md-button', {\n    staticClass: \"md-icon-button\"\n  }, [_c('md-icon', [_vm._v(\"more_vert\")])], 1)], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"md-toolbar-row\"\n  }, [_c('md-tabs', {\n    staticClass: \"md-primary\"\n  }, [_c('md-tab', {\n    attrs: {\n      \"id\": \"tab-all\",\n      \"md-label\": \"Tudo\"\n    }\n  }), _vm._v(\" \"), _c('md-tab', {\n    attrs: {\n      \"id\": \"tab-despesas\",\n      \"md-label\": \"Despesas\"\n    }\n  }), _vm._v(\" \"), _c('md-tab', {\n    attrs: {\n      \"id\": \"tab-receitas\",\n      \"md-label\": \"Receitas\"\n    }\n  })], 1)], 1)]), _vm._v(\" \"), _c('md-app-drawer', {\n    attrs: {\n      \"md-active\": _vm.menuVisible\n    },\n    on: {\n      \"update:mdActive\": function($event) {\n        _vm.menuVisible = $event\n      }\n    }\n  }, [_c('md-toolbar', {\n    staticClass: \"md-transparent\",\n    attrs: {\n      \"md-elevation\": \"0\"\n    }\n  }, [_vm._v(\"Navigation\")]), _vm._v(\" \"), _c('md-list', [_c('md-list-item', [_c('md-icon', [_vm._v(\"move_to_inbox\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-list-item-text\"\n  }, [_vm._v(\"Inbox\")])], 1), _vm._v(\" \"), _c('md-list-item', [_c('md-icon', [_vm._v(\"send\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-list-item-text\"\n  }, [_vm._v(\"Sent Mail\")])], 1), _vm._v(\" \"), _c('md-list-item', [_c('md-icon', [_vm._v(\"delete\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-list-item-text\"\n  }, [_vm._v(\"Trash\")])], 1), _vm._v(\" \"), _c('md-list-item', [_c('md-icon', [_vm._v(\"error\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"md-list-item-text\"\n  }, [_vm._v(\"Spam\")])], 1)], 1)], 1), _vm._v(\" \"), _c('md-app-content', [_c('md-table', {\n    attrs: {\n      \"md-card\": \"\"\n    },\n    on: {\n      \"md-selected\": _vm.onSelect\n    },\n    scopedSlots: _vm._u([{\n      key: \"md-table-row\",\n      fn: function(ref) {\n        var item = ref.item;\n\n        return _c('md-table-row', {\n          attrs: {\n            \"md-selectable\": \"multiple\",\n            \"md-auto-select\": \"\"\n          }\n        }, [_c('md-table-cell', {\n          attrs: {\n            \"md-label\": \"Item\",\n            \"md-sort-by\": \"description\"\n          }\n        }, [_vm._v(_vm._s(item.description))]), _vm._v(\" \"), _c('md-table-cell', {\n          attrs: {\n            \"md-label\": \"Value\",\n            \"md-sort-by\": \"value\"\n          }\n        }, [_vm._v(_vm._s(item.value))])], 1)\n      }\n    }]),\n    model: {\n      value: (_vm.items),\n      callback: function($$v) {\n        _vm.items = $$v\n      },\n      expression: \"items\"\n    }\n  }, [_c('md-table-toolbar', [_c('h3', {\n    staticClass: \"md-title\",\n    staticStyle: {\n      \"flex\": \"1\"\n    }\n  }, [_vm._v(\"TOTAL \" + _vm._s(_vm.total))])])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-67935b62\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Bills.vue\n// module id = 241\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('md-dialog', {\n    ref: \"login\",\n    attrs: {\n      \"md-active\": _vm.showLogin\n    },\n    on: {\n      \"update:mdActive\": function($event) {\n        _vm.showLogin = $event\n      }\n    }\n  }, [_c('md-dialog-title', [_vm._v(\"Login\")]), _vm._v(\" \"), _c('md-dialog-content', [_c('p', [_vm._v(\"Please log in with your Google Drive account\")])]), _vm._v(\" \"), _c('md-dialog-actions', [_c('md-button', {\n    staticClass: \"md-primary\",\n    nativeOn: {\n      \"click\": function($event) {\n        return _vm.handleAuthClick($event)\n      }\n    }\n  }, [_vm._v(\"Login\")])], 1)], 1), _vm._v(\" \"), (_vm.loading) ? _c('div', {\n    staticClass: \"loading\"\n  }, [_c('md-progress-spinner', {\n    attrs: {\n      \"md-diameter\": 100,\n      \"md-stroke\": 5,\n      \"md-mode\": \"indeterminate\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), _c('create-new-file-dialog', {\n    ref: \"create_new_file\"\n  }), _vm._v(\" \"), _c('bills-view', {\n    ref: \"bills\"\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-a859c53c\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 242\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('md-content', [_c('md-dialog', {\n    ref: \"create_new_file\",\n    attrs: {\n      \"md-active\": _vm.showDialog,\n      \"md-click-outside-to-close\": false,\n      \"md-close-on-esc\": false\n    },\n    on: {\n      \"update:mdActive\": function($event) {\n        _vm.showDialog = $event\n      }\n    }\n  }, [_c('md-dialog-title', [_vm._v(\"Create new file\")]), _vm._v(\" \"), _c('md-dialog-content', [_c('md-field', [_c('label', [_vm._v(\"File name\")]), _vm._v(\" \"), _c('md-input', {\n    attrs: {\n      \"v-model\": _vm.filename,\n      \"id\": \"create-filename-input\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('md-dialog-actions', [_c('md-button', {\n    staticClass: \"md-primary\",\n    attrs: {\n      \"id\": \"create-new-file-button\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.createNew()\n      }\n    }\n  }, [_vm._v(\"Create\")]), _vm._v(\" \"), _c('md-button', {\n    attrs: {\n      \"id\": \"open-from-gdrive-button\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.openFromGDrive()\n      }\n    }\n  }, [_vm._v(\"open from Google Drive \"), _c('img', {\n    attrs: {\n      \"src\": _vm.gdriveSvg\n    }\n  })])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-b33cb8c4\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/CreateNewFileDialog.vue\n// module id = 243\n// module chunks = 1","import MultiPartBuilder from '@/gapi/multipart'\n\nclass GApiIntegration {\n\n/* global gapi, google */\n\n  constructor () {\n    this.APPLICATION_ID = '233592491629'\n    this.CLIENT_ID = '233592491629-bmrpu85unjgi3612c08vnu0n8832shde.apps.googleusercontent.com'\n    this.SCOPES = ['email', 'profile', 'https://www.googleapis.com/auth/drive',\n      'https://www.googleapis.com/auth/drive.install']\n\n    this.DEFAULT_FIELDS = 'capabilities(canCopy,canEdit),createdTime,fileExtension,id,mimeType,modifiedTime,name,shared,size,version'\n  }\n\n  loadDriveApis () {\n    return new Promise(\n      (resolve, reject) => {\n        (function waitForApi () {\n          console.info('loadDriveApi...')\n          if (gapi && gapi.client) {\n            Promise.all([\n              gapi.client.load('drive', 'v3'),\n              gapi.load('picker'),\n              gapi.load('drive-share'),\n              gapi.load('drive-realtime')])\n              .then(() => {\n                console.info('gapi.client.load finished!')\n                resolve()\n              })\n          } else {\n            setTimeout(() => waitForApi(), 100)\n            console.info('wait for it...')\n          }\n        })()\n      }\n    )\n  }\n\n  /**\n   * Makes the gapi authorization process\n   */\n  authorize (immediate = true, user = null) {\n    console.info('authorize')\n    return new Promise(\n      (resolve, reject) => {\n        gapi.auth.authorize(\n          this.buildAuthRequest(immediate, user),\n          (authResult) => {\n            console.info('RESULT!!!!!!!!')\n            if (authResult && !authResult.error) {\n              console.info('resolved!')\n              resolve()\n            } else {\n              console.info('rejected!')\n              reject('Sorry, you are not allowed to open the file...')\n            }\n          }\n        )\n      }\n    )\n  }\n\n  /**\n   * Builds a request object suitable for gapi.auth.authorize calls.\n   *\n   * @param {Boolean} immediateMode True if auth should be checked silently\n   * @param {String} user Optional login hint indiciating which account should be authorized\n   * @return {Promise} promise that resolves on completion of the login\n   */\n  buildAuthRequest (immediateMode, user) {\n    var request = {\n      client_id: this.CLIENT_ID,\n      scope: this.SCOPES.join(' '),\n      immediate: immediateMode\n    }\n    if (user) {\n      request.login_hint = user\n      request.authuser = -1\n    }\n    return request\n  }\n\n  saveFile (file, filename, mimeType) {\n    var path\n    var method\n\n    if (file.metadata.id) {\n      path = '/upload/drive/v3/files/' + encodeURIComponent(file.metadata.id)\n      method = 'PATCH'\n    } else {\n      path = '/upload/drive/v3/files'\n      method = 'POST'\n    }\n\n    const metadata = { mimeType: (mimeType || file.metadata.mimeType), name: (filename || file.metadata.name) }\n\n    const multipart = new MultiPartBuilder()\n        .append('application/json', JSON.stringify(metadata))\n        .append(file.metadata.mimeType, (file.content || ''))\n        .finish()\n\n    return gapi.client.request({\n      path: path,\n      method: method,\n      params: {\n        uploadType: 'multipart',\n        fields: this.DEFAULT_FIELDS\n      },\n      headers: { 'Content-Type': multipart.type },\n      body: multipart.body\n    })\n  }\n\n  /**\n   * Combines metadata & content into a single object & caches the result\n   *\n   * @param {Object} metadata File metadata\n   * @param {String} content File content\n   * @return {Object} combined object\n   */\n  combineAndStoreResults (metadata, content) {\n    var file = {\n      metadata: metadata,\n      content: content\n    }\n    return file\n  };\n\n  /**\n   * Load a file from Drive. Fetches both the metadata & content in parallel.\n   *\n   * @param {String} fileID ID of the file to load\n   * @return {Promise} promise that resolves to an object containing the file metadata & content\n   */\n  loadFile (fileId) {\n    return new Promise(\n      (resolve, reject) => {\n        var metadataRequest = gapi.client.drive.files.get({\n          fileId: fileId,\n          fields: this.DEFAULT_FIELDS\n        })\n        var contentRequest = gapi.client.drive.files.get({\n          fileId: fileId,\n          alt: 'media'\n        })\n\n        resolve(Promise.all([metadataRequest, contentRequest]))\n      }).then((responses) => {\n        return {metadata: responses[0].result, content: responses[1].body}\n      })\n  };\n\n  loadRtDoc (file, contentEventHandler, filenameEventHandler, collaboratorEventHandler, cursorsMapEventHandler) {\n    var that = this\n    return new Promise(\n      (resolve, reject) => {\n        gapi.drive.realtime.load(file.metadata.id,\n          (doc) => {\n            console.log('loaded realtime doc', doc)\n            // Get the field named \"text\" in the root map.\n            that.contentText = doc.getModel().getRoot().get('content')\n            that.contentText.addEventListener(gapi.drive.realtime.EventType.TEXT_INSERTED, contentEventHandler)\n            that.contentText.addEventListener(gapi.drive.realtime.EventType.TEXT_DELETED, contentEventHandler)\n\n            that.filenameText = doc.getModel().getRoot().get('filename')\n            that.filenameText.addEventListener(gapi.drive.realtime.EventType.TEXT_INSERTED, filenameEventHandler)\n            that.filenameText.addEventListener(gapi.drive.realtime.EventType.TEXT_DELETED, filenameEventHandler)\n\n            // collaborators\n            doc.addEventListener(gapi.drive.realtime.EventType.COLLABORATOR_JOINED, collaboratorEventHandler)\n            doc.addEventListener(gapi.drive.realtime.EventType.COLLABORATOR_LEFT, collaboratorEventHandler)\n            collaboratorEventHandler({target: doc, type: 'init_collaborators'})\n\n            // cursors map\n            that.cursorsMap = doc.getModel().getRoot().get('cursors')\n            that.cursorsMap.addEventListener(gapi.drive.realtime.EventType.VALUE_CHANGED, cursorsMapEventHandler)\n\n            resolve(doc.getModel())\n          },\n          (model) => {\n            console.log('initializing model', model)\n\n            var contentString = model.createString(file.content)\n            model.getRoot().set('content', contentString)\n\n            var filenameString = model.createString(file.content)\n            model.getRoot().set('filename', filenameString)\n\n            that.cursorsMap = model.createMap()\n            model.getRoot().set('cursors', that.cursorsMap)\n          },\n          (error) => {\n            console.log('failed realtime load', error)\n            if (error.type === window.gapi.drive.realtime.ErrorType.TOKEN_REFRESH_REQUIRED) {\n              this.authorize(true)\n                .then(() => {\n                  this.loadRtDoc(file, contentEventHandler, filenameEventHandler, collaboratorEventHandler, cursorsMapEventHandler)\n                })\n                .catch(() => {\n                  reject('Could not authorize')\n                })\n            } else if (error.type === window.gapi.drive.realtime.ErrorType.CLIENT_ERROR) {\n              reject('An Error happened: ' + error.message)\n            } else if (error.type === window.gapi.drive.realtime.ErrorType.NOT_FOUND) {\n              reject('The file does not exist or you do not have permissions to access it.')\n            } else if (error.type === window.gapi.drive.realtime.ErrorType.FORBIDDEN) {\n              reject('You do not have access to this file. Try having the owner share it with you from Google Drive.')\n              window.location.href = '/'\n            }\n          })\n      })\n  }\n\n  /**\n   * Displays the Drive file picker configured for selecting text files\n   *\n   * @return {Promise} Promise that resolves with the ID of the selected file\n   */\n  showPicker () {\n    return new Promise(\n      (resolve, reject) => {\n        var view = new google.picker.DocsView(google.picker.ViewId.DOCS)\n        // view.setMimeTypes('text/plain')\n        // console.log(process.env.DEFAULT_MIMETYPE)\n        view.setSelectFolderEnabled(true)\n        view.setIncludeFolders(true)\n        var picker = new google.picker.PickerBuilder()\n          .setAppId('233592491629')\n          .setOAuthToken(gapi.auth.getToken().access_token)\n          .addView(view)\n          .setCallback(function (data) {\n            if (data.action === 'picked') {\n              var id = data.docs[0].id\n              resolve(id)\n            } else if (data.action === 'cancel') {\n              reject('cancel')\n            }\n          })\n          .build()\n        picker.setVisible(true)\n      })\n  };\n\n  /**\n   * Displays the Drive sharing dialog\n   *\n   * @param {String} id ID of the file to share\n   */\n  showSharing (id) {\n    var share = new gapi.drive.share.ShareClient('233592491629')\n    share.setOAuthToken(gapi.auth.getToken().access_token)\n    share.setItemIds([id])\n    share.showSettingsDialog()\n  };\n}\n\nexport default new GApiIntegration()\n\n\n\n// WEBPACK FOOTER //\n// ./src/gapi/gapi-integration.js","// vuex/store.js\nimport Vue from 'vue'\nimport Vuex from 'vuex'\nimport file from '@/store/modules/file'\nimport bills from '@/store/modules/bills'\nimport collaborators from '@/store/modules/collaborators'\nimport * as actions from '@/store/actions'\n\nVue.use(Vuex)\nconsole.log('Using Vuex')\n\nconst debug = process.env.NODE_ENV !== 'production'\n\nexport default new Vuex.Store({\n  actions,\n  // combine sub modules\n  modules: {\n    file,\n    bills,\n    collaborators\n  },\n  strict: debug\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","\n/* styles */\nrequire(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-a859c53c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a859c53c\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 95\n// module chunks = 1","const ITEM = {\n  '_id': 0,\n  'description': '',\n  'note': '',\n  'value': 0.00,\n  'currency': 'BRL',\n  'resource': 'carteira',\n  'date': '',\n  'due': '',\n  'tags': []\n}\n\nexport function onGapiLoaded () {\n  console.log('foi')\n}\n\nexport function defaultBill () {\n  return ITEM\n}\n\nexport function storeBills (obj) {\n  return localStorage.setItem('items', obj)\n}\n\nexport function getBills (fileContent) {\n  // fake API request\n  return JSON.parse(fileContent)\n}\n\nexport function getBill (id) {\n  // fake an API request\n  return getBills().find(x => x._id === id)\n}\n\nexport function addBill (obj) {\n  return storeBills(getBills().push(obj))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api.js","/**\n * Helper for building multipart requests for uploading to Drive.\n */\nexport default class {\n\n  constructor () {\n    this.boundary = Math.random().toString(36).slice(2)\n    this.mimeType = 'multipart/mixed; boundary=\"' + this.boundary + '\"'\n    this.parts = []\n    this.body = null\n  }\n\n  /**\n   * Appends a part.\n   *\n   * @param {String} mimeType Content type of this part\n   * @param {Blob|File|String} content Body of this part\n   */\n  append (mimeType, content) {\n    if (this.body !== null) {\n      throw new Error('Builder has already been finalized.')\n    }\n    this.parts.push(\n      '\\r\\n--', this.boundary, '\\r\\n',\n      'Content-Type: ', mimeType, '\\r\\n\\r\\n',\n      content)\n    return this\n  }\n\n  /**\n   * Finalizes building of the multipart request and returns a Blob containing\n   * the request. Once finalized, appending additional parts will result in an\n   * error.\n   *\n   * @returns {Object} Object containing the mime type (mimeType) & assembled multipart body (body)\n   */\n  finish () {\n    if (this.parts.length === 0) {\n      throw new Error('No parts have been added.')\n    }\n    if (this.body === null) {\n      this.parts.push('\\r\\n--', this.boundary, '--')\n      this.body = this.parts.join('')\n      // TODO - switch to blob once gapi.client.request allows it\n      // this.body = new Blob(this.parts, {type: this.mimeType});\n    }\n    return {\n      type: this.mimeType,\n      body: this.body\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gapi/multipart.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport store from './store'\nimport VueMaterial from 'vue-material'\nimport 'vue-material/dist/vue-material.min.css'\nimport 'vue-material/dist/theme/default.css' // This line here\n\nVue.config.productionTip = false\n\nVue.use(VueMaterial)\n\nVue.filter('currency', function (value) {\n  return 'R$ ' + value.toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,')\n})\n\nVue.filter('date', function (value) {\n  let date = new Date(value.replace(/-/g, '/').replace(/T.+/, ''))\n  return date.getDate() + '/' + (date.getMonth() + 1)\n})\n\nrequire('es6-promise').polyfill()\n\n/* eslint-disable no-new */\nnew Vue({\n  store,\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}