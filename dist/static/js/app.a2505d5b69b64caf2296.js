webpackJsonp([1],{13:function(e,t,i){"use strict";function n(e){return localStorage.setItem("items",e)}function a(){return JSON.parse(localStorage.getItem("items"))}function o(e){return a().find(function(t){return t._id===e})}t.a=n,t.c=a,t.b=o},36:function(e,t,i){"use strict";var n=i(12),a=i(93),o=i(87),s=i.n(o),r=i(88),l=i.n(r),d=i(92),c=i.n(d),u=i(83);i.n(u);n.default.use(a.a),n.default.use(c.a),n.default.filter("currency",function(e){return"R$ "+e.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}),n.default.filter("date",function(e){var t=new Date(e.replace(/-/g,"/").replace(/T.+/,""));return t.getDate()+"/"+(t.getMonth()+1)}),t.a=new a.a({routes:[{path:"/",name:"bills",component:s.a},{path:"/item/:id",name:"item",component:l.a}]})},37:function(e,t,i){i(86);var n=i(22)(i(41),i(91),null,null);e.exports=n.exports},38:function(e,t,i){"use strict";var n=i(44),a=i.n(n),o=i(46),s=i.n(o),r=i(23),l=i.n(r),d=i(24),c=i.n(d),u=i(39),m=function(){function e(){l()(this,e),this.CLIENT_ID="233592491629-bmrpu85unjgi3612c08vnu0n8832shde.apps.googleusercontent.com",this.SCOPES=["email","profile","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.install"],this.DEFAULT_FIELDS="capabilities(canCopy,canEdit),createdTime,fileExtension,id,mimeType,modifiedTime,name,shared,size,version"}return c()(e,[{key:"loadDriveApis",value:function(){return new s.a(function(e,t){!function t(){console.info("loadDriveApi..."),gapi&&gapi.client?s.a.all([gapi.client.load("drive","v3"),gapi.load("picker"),gapi.load("drive-share"),gapi.load("drive-realtime")]).then(function(){console.info("gapi.client.load finished!"),e()}):(setTimeout(function(){return t()},100),console.info("wait for it..."))}()})}},{key:"authorize",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return console.info("authorize"),new s.a(function(n,a){gapi.auth.authorize(e.buildAuthRequest(t,i),function(e){console.info("RESULT!!!!!!!!"),e&&!e.error?(console.info("resolved!"),n()):(console.info("rejected!"),a("Sorry, you are not allowed to open the file..."))})})}},{key:"buildAuthRequest",value:function(e,t){var i={client_id:this.CLIENT_ID,scope:this.SCOPES.join(" "),immediate:e};return t&&(i.login_hint=t,i.authuser=-1),i}},{key:"saveFile",value:function(e,t,i){var n,o;e.metadata.id?(n="/upload/drive/v3/files/"+encodeURIComponent(e.metadata.id),o="PATCH"):(n="/upload/drive/v3/files",o="POST");var s={mimeType:i||e.metadata.mimeType,name:t||e.metadata.name},r=(new u.a).append("application/json",a()(s)).append(e.metadata.mimeType,e.content||"").finish();return gapi.client.request({path:n,method:o,params:{uploadType:"multipart",fields:this.DEFAULT_FIELDS},headers:{"Content-Type":r.type},body:r.body})}},{key:"combineAndStoreResults",value:function(e,t){return{metadata:e,content:t}}},{key:"loadFile",value:function(e){var t=this;return new s.a(function(i,n){var a=gapi.client.drive.files.get({fileId:e,fields:t.DEFAULT_FIELDS}),o=gapi.client.drive.files.get({fileId:e,alt:"media"});i(s.a.all([a,o]))}).then(function(e){return{metadata:e[0].result,content:e[1].body}})}},{key:"loadRtDoc",value:function(e,t,i,n,a){var o=this,r=this;return new s.a(function(s,l){gapi.drive.realtime.load(e.metadata.id,function(e){console.log("loaded realtime doc",e),r.contentText=e.getModel().getRoot().get("content"),r.contentText.addEventListener(gapi.drive.realtime.EventType.TEXT_INSERTED,t),r.contentText.addEventListener(gapi.drive.realtime.EventType.TEXT_DELETED,t),r.filenameText=e.getModel().getRoot().get("filename"),r.filenameText.addEventListener(gapi.drive.realtime.EventType.TEXT_INSERTED,i),r.filenameText.addEventListener(gapi.drive.realtime.EventType.TEXT_DELETED,i),e.addEventListener(gapi.drive.realtime.EventType.COLLABORATOR_JOINED,n),e.addEventListener(gapi.drive.realtime.EventType.COLLABORATOR_LEFT,n),n({target:e,type:"init_collaborators"}),r.cursorsMap=e.getModel().getRoot().get("cursors"),r.cursorsMap.addEventListener(gapi.drive.realtime.EventType.VALUE_CHANGED,a),s(e.getModel())},function(t){console.log("initializing model",t);var i=t.createString(e.content);t.getRoot().set("content",i);var n=t.createString(e.content);t.getRoot().set("filename",n),r.cursorsMap=t.createMap(),t.getRoot().set("cursors",r.cursorsMap)},function(s){console.log("failed realtime load",s),s.type===window.gapi.drive.realtime.ErrorType.TOKEN_REFRESH_REQUIRED?o.authorize(!0).then(function(){o.loadRtDoc(e,t,i,n,a)}).catch(function(){l("Could not authorize")}):s.type===window.gapi.drive.realtime.ErrorType.CLIENT_ERROR?l("An Error happened: "+s.message):s.type===window.gapi.drive.realtime.ErrorType.NOT_FOUND?l("The file does not exist or you do not have permissions to access it."):s.type===window.gapi.drive.realtime.ErrorType.FORBIDDEN&&(l("You do not have access to this file. Try having the owner share it with you from Google Drive."),window.location.href="/")})})}},{key:"showPicker",value:function(){return new s.a(function(e,t){var n=new google.picker.DocsView(google.picker.ViewId.DOCS);n.setMimeTypes(i.i({NODE_ENV:"production"}).DEFAULT_MIMETYPE),n.setSelectFolderEnabled(!0),n.setIncludeFolders(!0),(new google.picker.PickerBuilder).setAppId(i.i({NODE_ENV:"production"}).APPLICATION_ID).setOAuthToken(gapi.auth.getToken().access_token).addView(n).setCallback(function(i){if("picked"===i.action){var n=i.docs[0].id;e(n)}else"cancel"===i.action&&t("cancel")}).build().setVisible(!0)})}},{key:"showSharing",value:function(e){var t=new gapi.drive.share.ShareClient(i.i({NODE_ENV:"production"}).APPLICATION_ID);t.setOAuthToken(gapi.auth.getToken().access_token),t.setItemIds([e]),t.showSettingsDialog()}}]),e}();t.a=new m},39:function(e,t,i){"use strict";var n=i(23),a=i.n(n),o=i(24),s=i.n(o),r=function(){function e(){a()(this,e),this.boundary=Math.random().toString(36).slice(2),this.mimeType='multipart/mixed; boundary="'+this.boundary+'"',this.parts=[],this.body=null}return s()(e,[{key:"append",value:function(e,t){if(null!==this.body)throw new Error("Builder has already been finalized.");return this.parts.push("\r\n--",this.boundary,"\r\n","Content-Type: ",e,"\r\n\r\n",t),this}},{key:"finish",value:function(){if(0===this.parts.length)throw new Error("No parts have been added.");return null===this.body&&(this.parts.push("\r\n--",this.boundary,"--"),this.body=this.parts.join("")),{type:this.mimeType,body:this.body}}}]),e}();t.a=r},40:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(12),a=i(37),o=i.n(a),s=i(36);n.default.config.productionTip=!1,new n.default({el:"#app",router:s.a,template:"<App/>",components:{App:o.a}})},41:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13),a=i(38);t.default={name:"app",data:function(){return{items:[],loading:!0,error:null,receitas:!0,despesas:!0,user:"110208035347780990937",file:"0B8myU7zyawFnX2ZKUkxzejZ5c0k"}},mounted:function(){var e=this;a.a.loadDriveApis().then(function(){console.log("starting authorize"),a.a.authorize(!0,e.user).then(function(){return e.loadThisFile()}).catch(function(t){console.log("error inload or authorize"),e.$refs.login.open()})}),this.loadThisFile()},methods:{handleAuthClick:function(){var e=this;this.$refs.login.close(),a.a.authorize(!1,this.user).then(function(){e.loadThisFile()}).catch(function(e){console.log(e)})},loadThisFile:function(){if(this.file){var e=this;console.log("load file"),a.a.loadFile(this.file).then(function(t){e.$nextTick(function(){e.items=JSON.parse(t.content),i.i(n.a)(t.content),this.loading=!1})})}}}}},42:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);t.default={name:"bills",data:function(){return{items:[],loading:!1,error:null,receitas:!0,despesas:!0,user:"110208035347780990937",file:"0B8myU7zyawFnX2ZKUkxzejZ5c0k"}},mounted:function(){},created:function(){this.byJovane(),this.fetchData()},methods:{fetchData:function(){this.error=this.items=null,this.items=i.i(n.c)(),console.log(this.items)},byJovane:function(){console.log("desenvolvido por @jovanepires")},changeFilter:function(e){console.log(this.items),0===e&&(this.receitas=!0,this.despesas=!0),1===e&&(this.receitas=!1,this.despesas=!0),2===e&&(this.receitas=!0,this.despesas=!1)}},computed:{allItems:function(){return this.items||{}},negativeItems:function(){return this.items?this.items.filter(function(e){return e.value<0}):{}},positiveItems:function(){return this.items?this.items.filter(function(e){return e.value>0}):{}},total:function(){if(!this.items)return 0;var e=this;return this.items.filter(function(t){return!(!e.receitas||!e.despesas)||(e.receitas?t.value>0:!!e.despesas&&t.value<0)}).reduce(function(e,t){return e+t.value},0)},activeClass:function(){return this.total>=0?"green":"red"}}}},43:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);t.default={name:"item",data:function(){return{_id:1,item:null}},created:function(){this._id=parseInt(this.$route.params.id,10),this.fetchData(),this.byJovane()},methods:{fetchData:function(){this.error=this.item=null,this.item=i.i(n.b)(this._id)},byJovane:function(){console.log("desenvolvido por @jovanepires")},save:function(){alert("ok")}},computed:{activeClass:function(){return this.item.value>=0?"positive":"negative"},type:function(){return this.item.value>=0?"receita":"despesa"}}}},83:function(e,t){},84:function(e,t){},85:function(e,t){},86:function(e,t){},87:function(e,t,i){i(85);var n=i(22)(i(42),i(90),null,null);e.exports=n.exports},88:function(e,t,i){i(84);var n=i(22)(i(43),i(89),null,null);e.exports=n.exports},89:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"main item"},[i("md-toolbar",{staticClass:"md-transparent row"},[i("div",{staticClass:"md-toolbar-container"},[i("router-link",{staticClass:"md-icon-button",attrs:{to:{name:"bills"}}},[i("md-icon",[e._v("arrow_back")])],1)],1)]),e._v(" "),i("header",{staticClass:"row",class:e.activeClass},[i("div",{staticClass:"header-content"},[i("span",[e._v(e._s(e._f("currency")(e.item.value)))])]),e._v(" "),i("div",{staticClass:"header-title"},[i("div",{staticClass:"header-title-inner"},[e._v("\n        "+e._s(e.type)+"\n      ")])])]),e._v(" "),i("md-layout",[i("md-layout",{attrs:{"md-column":"","md-flex-medium":"100","md-flex-large":"60","md-flex-offset-medium":"0","md-flex-offset-large":"20","md-align-large":"center"}},[i("form",{attrs:{novalidate:""},on:{submit:function(t){t.stopPropagation(),t.preventDefault(),e.submit(t)}}},[i("md-input-container",[i("md-icon",[e._v("today")]),e._v(" "),i("label",[e._v("Data")]),e._v(" "),i("md-input",{model:{value:e.item.date,callback:function(t){e.item.date=t},expression:"item.date"}})],1),e._v(" "),i("md-input-container",[i("md-icon",[e._v("label_outline")]),e._v(" "),i("label",[e._v("Descrição")]),e._v(" "),i("md-input",{model:{value:e.item.description,callback:function(t){e.item.description=t},expression:"item.description"}})],1),e._v(" "),i("md-input-container",[i("md-icon",[e._v("account_balance_wallet")]),e._v(" "),i("label",[e._v("Conta")]),e._v(" "),i("md-input",{model:{value:e.item.resource.name,callback:function(t){e.item.resource.name=t},expression:"item.resource.name"}})],1),e._v(" "),i("md-input-container",[i("md-icon",[e._v("info_outline")]),e._v(" "),i("label",[e._v("Observação")]),e._v(" "),i("md-input",{model:{value:e.item.note,callback:function(t){e.item.note=t},expression:"item.note"}})],1),e._v(" "),i("md-button",{staticClass:"md-fab md-raised md-primary md-fab-bottom-right fixed-button-right",nativeOn:{click:function(t){e.save(t)}}},[i("md-icon",[e._v("done")])],1)],1)])],1)],1)},staticRenderFns:[]}},90:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"main bills"},[i("md-toolbar",{staticClass:"row",class:e.activeClass},[i("md-button",{staticClass:"md-icon-button"},[i("md-icon",[e._v("menu")])],1),e._v(" "),i("span",{staticStyle:{flex:"1"}}),e._v(" "),i("md-button",{staticClass:"md-icon-button"},[i("md-icon",[e._v("filter_list")])],1),e._v(" "),i("md-button",{staticClass:"md-icon-button"},[i("md-icon",[e._v("search")])],1),e._v(" "),i("div",{staticClass:"md-toolbar-container"},[i("header",{staticStyle:{flex:"1"}},[i("div",{staticClass:"header-content"},[i("span",[e._v(e._s(e._f("currency")(e.total)))])]),e._v(" "),i("div",{staticClass:"header-title"},[i("div",{staticClass:"header-title-inner"},[e._v("\n            saldo geral\n          ")])])])])],1),e._v(" "),i("md-tabs",{attrs:{"md-fixed":""},on:{change:e.changeFilter}},[i("md-tab",{staticClass:"md-tab-zero-padding-medium",attrs:{id:"tudo","md-label":"Tudo"}},[i("md-layout",[i("md-layout",{attrs:{"md-column":"","md-flex-medium":"100","md-flex-large":"60","md-flex-offset-medium":"0","md-flex-offset-large":"20","md-align-large":"center"}},[i("md-table",[i("md-table-body",e._l(e.items,function(t){return i("md-table-row",{key:t._id,attrs:{flex:"",layout:"row"}},[i("md-table-cell",{attrs:{flex:"60"}},[i("span",{staticClass:"float-date"},[e._v(e._s(e._f("date")(t.date)))]),e._v("\n                  "+e._s(t.description)+"\n                ")]),e._v(" "),i("md-table-cell",{attrs:{flex:"30"}},[e._v("\n                  "+e._s(t.value)+"\n                ")]),e._v(" "),i("md-table-cell",{attrs:{flex:"10"}},[i("router-link",{staticClass:"md-icon-button",attrs:{to:{name:"item",params:{id:t._id}}}},[i("md-icon",[e._v("more_vert")])],1)],1)],1)}))],1)],1)],1)],1),e._v(" "),i("md-tab",{staticClass:"md-tab-zero-padding-medium",attrs:{id:"despesas","md-label":"Despesas"}},[i("md-layout",{attrs:{"md-row":""}},[i("md-layout",{attrs:{"md-column":"","md-flex-medium":"100","md-flex-large":"60","md-flex-offset":"0","md-flex-offset-medium":"0","md-flex-offset-large":"20","md-align-large":"center"}},[i("md-table",[i("md-table-body",e._l(e.negativeItems,function(t){return i("md-table-row",{key:t._id,attrs:{flex:"",layout:"row"}},[i("md-table-cell",[i("span",{staticClass:"float-date"},[e._v(e._s(e._f("date")(t.date)))]),e._v("\n                  "+e._s(t.description)+"\n                ")]),e._v(" "),i("md-table-cell",{attrs:{flex:"30"}},[e._v("\n                  "+e._s(t.value)+"\n                ")]),e._v(" "),i("md-table-cell",{attrs:{flex:"10"}},[i("router-link",{staticClass:"md-icon-button",attrs:{to:{name:"item",params:{id:t._id}}}},[i("md-icon",[e._v("more_vert")])],1)],1)],1)}))],1)],1)],1)],1),e._v(" "),i("md-tab",{staticClass:"md-tab-zero-padding-medium",attrs:{id:"receitas","md-label":"Receitas"}},[i("md-layout",[i("md-layout",{attrs:{"md-column":"","md-flex-medium":"100","md-flex-large":"60","md-flex-offset-medium":"0","md-flex-offset-large":"20","md-align-large":"center"}},[i("md-table",[i("md-table-body",e._l(e.positiveItems,function(t){return i("md-table-row",{key:t._id,attrs:{flex:"",layout:"row"}},[i("md-table-cell",{attrs:{flex:"60"}},[i("span",{staticClass:"float-date"},[e._v(e._s(e._f("date")(t.date)))]),e._v("\n                  "+e._s(t.description)+"\n                ")]),e._v(" "),i("md-table-cell",{attrs:{flex:"30"}},[e._v("\n                  "+e._s(t.value)+"\n                ")]),e._v(" "),i("md-table-cell",{attrs:{flex:"10"}},[i("router-link",{staticClass:"md-icon-button",attrs:{to:{name:"item",params:{id:t._id}}}},[i("md-icon",[e._v("more_vert")])],1)],1)],1)}))],1)],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"fixed-button-right"},[i("md-speed-dial",{staticClass:"md-fab-bottom-right",attrs:{"md-mode":"fling","md-direction":"top"}},[i("md-button",{staticClass:"md-fab",attrs:{"md-fab-trigger":""}},[i("md-icon",{attrs:{"md-icon-morph":""}},[e._v("close")]),e._v(" "),i("md-icon",[e._v("add")])],1),e._v(" "),i("md-button",{staticClass:"md-fab md-mini md-clean"},[i("md-icon",[e._v("email")])],1),e._v(" "),i("md-button",{staticClass:"md-fab md-mini md-clean"},[i("md-icon",[e._v("content_copy")])],1)],1)],1)],1)},staticRenderFns:[]}},91:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-md-4 offset-md-4",attrs:{id:"app"}},[i("md-dialog",{ref:"login"},[i("md-dialog-title",[e._v("Login")]),e._v(" "),i("md-dialog-content",[i("p",[e._v("Please log in with your Google Drive account")])]),e._v(" "),i("md-dialog-actions",[i("md-button",{staticClass:"md-primary",nativeOn:{click:function(t){e.handleAuthClick(t)}}},[e._v("Login")])],1)],1),e._v(" "),e.loading?i("div",{staticClass:"loading"},[i("md-spinner",{attrs:{"md-size":60,"md-indeterminate":""}})],1):e._e(),e._v(" "),i("transition",{attrs:{name:"slide"}},[i("router-view")],1)],1)},staticRenderFns:[]}}},[40]);
//# sourceMappingURL=app.a2505d5b69b64caf2296.js.map